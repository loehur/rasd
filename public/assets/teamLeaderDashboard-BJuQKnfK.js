import{r as g,i as B,j as ee,c as n,o as i,a as e,e as c,t as r,w as E,d as S,h as d,F as P,k as H,f as v,l as w,v as m,n as R,b as te}from"./tailwind-Bv49ST1N.js";import{g as oe,a as se,c as le,b as re}from"./api-pWXUclup.js";import"./api-n_PshMHp.js";const ae={class:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"},ne={class:"bg-white shadow-sm border-b border-gray-200"},ie={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},de={class:"flex justify-between items-center"},ue={class:"text-sm text-gray-600 mt-1"},pe={class:"relative"},ge={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ve={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},me={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-200"},fe={class:"flex items-center"},ce={class:"ml-4"},xe={class:"text-2xl font-bold text-gray-900"},ye={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-200"},be={class:"flex items-center"},we={class:"ml-4"},ke={class:"text-lg font-bold text-gray-900"},he={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},_e={class:"p-6"},Se={key:0,class:"text-center py-12"},Ce={key:1,class:"text-center py-12"},Me={class:"text-gray-600"},Ae={key:2,class:"text-center py-12"},De={key:3},Ve={class:"overflow-x-auto"},je={class:"min-w-full divide-y divide-gray-200"},Fe={class:"bg-white divide-y divide-gray-200"},Ie={class:"px-6 py-4 whitespace-nowrap"},Le={class:"text-sm font-medium text-gray-900"},Be={class:"text-xs text-gray-500"},Pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},He={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Re={class:"px-6 py-4 whitespace-nowrap"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ze={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ee={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},Oe=["onClick"],Ne={key:0,class:"mt-4 flex items-center justify-between border-t border-gray-200 pt-4"},qe={class:"text-sm text-gray-700"},We={class:"flex space-x-2"},$e=["disabled"],Ge=["onClick"],Je=["disabled"],Ke={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto"},Qe={class:"bg-white rounded-xl shadow-xl max-w-4xl w-full my-8"},Xe={class:"p-6 max-h-[calc(90vh-200px)] overflow-y-auto"},Ye={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ze={class:"md:col-span-2"},et=["value"],tt={class:"md:col-span-2"},ot={class:"md:col-span-2"},st={class:"p-6 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3"},lt=["disabled"],rt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto"},at={class:"bg-white rounded-xl shadow-xl max-w-3xl w-full my-8"},nt={class:"p-6 max-h-[calc(90vh-200px)] overflow-y-auto"},it={key:0,class:"grid grid-cols-2 gap-4"},dt={key:0,class:"col-span-2"},ut=["src"],pt={class:"col-span-2"},gt={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vt={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},mt={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},ft={__name:"DashboardApp",setup(ct){const C=g(""),M=g([]),A=g([]),D=g(!0),y=g(""),V=g(!1),j=g(!1),k=g(!1),a=g(null),h=g(null),x=g({show:!1,message:"",type:"success"}),F=g(!1),u=g({total:0,per_page:15,current_page:1,last_page:1,from:0,to:0}),s=g({staff_id:"",work_status:"",name:"",position:"",superior:"",department:"",hire_date:"",rank:"",device:"",group:"",report_day:new Date().toISOString().split("T")[0],last_working_day:"",ranking_intervals:"",reason_for_resign:"",status_code:""}),O=B(()=>M.value.length),N=B(()=>new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})),q=B(()=>{const l=[],t=u.value.current_page,o=u.value.last_page,p=2;for(let b=Math.max(2,t-p);b<=Math.min(o-1,t+p);b++)l.push(b);return t-p>2&&l.unshift("..."),t+p<o-1&&l.push("..."),l.unshift(1),o>1&&l.push(o),l.filter((b,Y,Z)=>Z.indexOf(b)===Y)});ee(()=>{if(localStorage.getItem("tl_must_change_password")==="true"){window.location.href="/team-leader/change-password";return}const t=JSON.parse(localStorage.getItem("tl_user")||"{}");C.value=t.name||"Team Leader",W(),I()});const W=async()=>{try{if(!localStorage.getItem("tl_auth_token")){window.location.href="/";return}const t=await oe();t.success&&(M.value=t.data||[])}catch(l){console.error("Error fetching staff:",l)}},I=async(l=1)=>{D.value=!0,y.value="";try{const t=await se(l);t.success?(A.value=t.data||[],u.value=t.pagination):y.value=t.message||"Failed to load attendances"}catch(t){y.value="Failed to load attendances",console.error("Error:",t)}finally{D.value=!1}},$=async l=>{const t=l.target.value;if(console.log("Staff selection changed to:",t),!t){console.log("No staff selected (empty value)");return}console.log("Fetching staff detail for:",t);try{const o=await re(t);if(console.log("Staff detail response:",o),o.success&&o.data){const p=o.data;console.log("Auto-filling form with staff data:",p),s.value.name=p.name||"",s.value.position=p.position||"",s.value.superior=p.superior||"",s.value.department=p.department||"",s.value.hire_date=p.hire_date||"",s.value.rank=p.rank||"",s.value.group=p.group||"",console.log("Form data after auto-fill:",s.value)}else console.error("Failed to get staff detail:",o),f(o.message||"Failed to load staff details","error")}catch(o){console.error("Error fetching staff detail:",o),f("Error loading staff details","error")}},G=l=>{const t=l.target.files[0];t&&(h.value=t)},J=()=>{z(),V.value=!0},T=()=>{V.value=!1,z()},z=()=>{s.value={staff_id:"",work_status:"",name:"",position:"",superior:"",department:"",hire_date:"",rank:"",device:"",group:"",report_day:new Date().toISOString().split("T")[0],last_working_day:"",ranking_intervals:"",reason_for_resign:"",status_code:""},h.value=null},U=async()=>{if(!h.value){f("Please upload proof image","error");return}k.value=!0;try{const l=await le(s.value,h.value);if(l.success)f(l.message||"Attendance created successfully","success"),T(),I(u.value.current_page);else if(l.errors){const t=Object.values(l.errors).flat();f(t.join(", "),"error")}else f(l.message||"Operation failed","error")}catch(l){f("An error occurred","error"),console.error("Error:",l)}finally{k.value=!1}},K=l=>{a.value=l,j.value=!0},Q=()=>{j.value=!1,a.value=null},L=l=>{l==="..."||l<1||l>u.value.last_page||I(l)},_=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",f=(l,t="success")=>{x.value={show:!0,message:l,type:t},setTimeout(()=>{x.value.show=!1},3e3)},X=()=>{localStorage.removeItem("tl_auth_token"),localStorage.removeItem("tl_user"),window.location.href="/"};return(l,t)=>(i(),n("div",ae,[e("header",ne,[e("div",ie,[e("div",de,[e("div",null,[t[19]||(t[19]=e("h1",{class:"text-2xl font-bold text-gray-900"},"TL-Dashboard",-1)),e("p",ue,"Welcome, "+r(C.value),1)]),e("div",pe,[e("button",{onClick:t[0]||(t[0]=o=>F.value=!F.value),class:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"},[t[20]||(t[20]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("span",null,r(C.value),1),t[21]||(t[21]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),F.value?(i(),n("div",{key:0,onClick:t[1]||(t[1]=E(()=>{},["stop"])),class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50"},[t[23]||(t[23]=S('<a href="/team-leader/account" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition"><svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Account </a><a href="/team-leader/change-password" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition"><svg class="w-4 h-4 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg> Change Password </a><div class="border-t border-gray-200 my-1"></div>',3)),e("button",{onClick:X,class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition"},[...t[22]||(t[22]=[e("svg",{class:"w-4 h-4 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),d(" Logout ",-1)])])])):c("",!0)])])])]),e("main",ge,[e("div",ve,[e("div",me,[e("div",fe,[t[25]||(t[25]=e("div",{class:"p-3 rounded-lg bg-blue-100"},[e("svg",{class:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",ce,[t[24]||(t[24]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Staff",-1)),e("p",xe,r(O.value),1)])])]),t[28]||(t[28]=S('<div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200"><div class="flex items-center"><div class="p-3 rounded-lg bg-green-100"><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="ml-4"><p class="text-sm font-medium text-gray-600">Present Today</p><p class="text-2xl font-bold text-gray-900">0</p></div></div></div>',1)),e("div",ye,[e("div",be,[t[27]||(t[27]=e("div",{class:"p-3 rounded-lg bg-purple-100"},[e("svg",{class:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",we,[t[26]||(t[26]=e("p",{class:"text-sm font-medium text-gray-600"},"Today's Date",-1)),e("p",ke,r(N.value),1)])])])]),e("div",he,[e("div",{class:"p-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50"},[e("div",{class:"flex justify-between items-center"},[t[30]||(t[30]=e("div",null,[e("h2",{class:"text-xl font-bold text-gray-900 flex items-center"},[e("svg",{class:"w-6 h-6 mr-2 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),d(" Staff Attendance ")]),e("p",{class:"text-sm text-gray-600 mt-1"},"Record attendance for your team members")],-1)),e("button",{onClick:J,class:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-lg hover:from-indigo-700 hover:to-purple-700"},[...t[29]||(t[29]=[e("svg",{class:"w-5 h-5 inline-block mr-2 -mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),d(" Record Attendance ",-1)])])])]),e("div",_e,[D.value?(i(),n("div",Se,[...t[31]||(t[31]=[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Loading attendance records...",-1)])])):y.value?(i(),n("div",Ce,[t[32]||(t[32]=e("svg",{class:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Me,r(y.value),1)])):A.value.length===0?(i(),n("div",Ae,[...t[33]||(t[33]=[e("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No Attendance Records",-1),e("p",{class:"text-gray-600"},"Start by creating a new attendance record.",-1)])])):(i(),n("div",De,[e("div",Ve,[e("table",je,[t[34]||(t[34]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Employee"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Position"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Department"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"WFH/Onsite"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Device"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Report Day"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Fe,[(i(!0),n(P,null,H(A.value,o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Ie,[e("div",Le,r(o.name),1),e("div",Be,r(o.staff_id),1)]),e("td",Pe,r(o.position),1),e("td",He,r(o.department),1),e("td",Re,[e("span",{class:R(["px-2 py-1 text-xs font-semibold rounded-full",o.work_status==="WFH"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},r(o.work_status),3)]),e("td",Te,r(o.device),1),e("td",ze,r(_(o.report_day)),1),e("td",Ue,r(o.status_code),1),e("td",Ee,[e("button",{onClick:p=>K(o),class:"text-indigo-600 hover:text-indigo-900"}," View ",8,Oe)])]))),128))])])]),u.value.last_page>1?(i(),n("div",Ne,[e("div",qe," Showing "+r(u.value.from)+" to "+r(u.value.to)+" of "+r(u.value.total)+" results ",1),e("div",We,[e("button",{onClick:t[2]||(t[2]=o=>L(u.value.current_page-1)),disabled:u.value.current_page===1,class:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50"}," Previous ",8,$e),(i(!0),n(P,null,H(q.value,o=>(i(),n("button",{key:o,onClick:p=>L(o),class:R(["px-3 py-1 border rounded-md text-sm font-medium",o===u.value.current_page?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 text-gray-700 hover:bg-gray-50"])},r(o),11,Ge))),128)),e("button",{onClick:t[3]||(t[3]=o=>L(u.value.current_page+1)),disabled:u.value.current_page===u.value.last_page,class:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50"}," Next ",8,Je)])])):c("",!0)]))])])]),V.value?(i(),n("div",Ke,[e("div",Qe,[t[56]||(t[56]=e("div",{class:"p-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50"},[e("h3",{class:"text-xl font-bold text-gray-900"},"Record Attendance")],-1)),e("div",Xe,[e("form",{onSubmit:E(U,["prevent"]),class:"space-y-6"},[e("div",Ye,[e("div",Ze,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Employee *",-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.value.staff_id=o),onChange:t[5]||(t[5]=o=>$(o)),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[t[35]||(t[35]=e("option",{value:""},"Select Employee",-1)),(i(!0),n(P,null,H(M.value,o=>(i(),n("option",{key:o.staff_id,value:o.staff_id},r(o.name)+" - "+r(o.staff_id),9,et))),128))],544),[[w,s.value.staff_id]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Position *",-1)),v(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.value.position=o),type:"text",required:"",readonly:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,512),[[m,s.value.position]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Superior",-1)),v(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.value.superior=o),type:"text",readonly:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,512),[[m,s.value.superior]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Department *",-1)),v(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.value.department=o),type:"text",required:"",readonly:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,512),[[m,s.value.department]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Hire Date *",-1)),v(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.value.hire_date=o),type:"date",required:"",readonly:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,512),[[m,s.value.hire_date]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rank *",-1)),v(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.value.rank=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[...t[41]||(t[41]=[S('<option value="">Select Rank</option><option value="S1">S1</option><option value="S2">S2</option><option value="S3">S3</option><option value="S4">S4</option><option value="S5">S5</option><option value="S6">S6</option>',7)])],512),[[w,s.value.rank]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Device *",-1)),v(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.value.device=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[...t[43]||(t[43]=[e("option",{value:""},"Select Device",-1),e("option",{value:"Mobile"},"Mobile",-1),e("option",{value:"PC"},"PC",-1)])],512),[[w,s.value.device]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Report Day *",-1)),v(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.value.report_day=o),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[m,s.value.report_day]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Last Working Day",-1)),v(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.value.last_working_day=o),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[m,s.value.last_working_day]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"WFH/Onsite *",-1)),v(e("select",{"onUpdate:modelValue":t[14]||(t[14]=o=>s.value.work_status=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[...t[47]||(t[47]=[e("option",{value:""},"Select Status",-1),e("option",{value:"WFH"},"WFH",-1),e("option",{value:"Onsite"},"Onsite",-1)])],512),[[w,s.value.work_status]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ranking/Intervals *",-1)),v(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>s.value.ranking_intervals=o),type:"text",required:"",placeholder:"e.g., 5%-25%",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[m,s.value.ranking_intervals]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Group",-1)),v(e("input",{"onUpdate:modelValue":t[16]||(t[16]=o=>s.value.group=o),type:"text",readonly:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,512),[[m,s.value.group]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status & Code *",-1)),v(e("select",{"onUpdate:modelValue":t[17]||(t[17]=o=>s.value.status_code=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},[...t[51]||(t[51]=[S('<option value="">Select Status</option><option value="AFPI CERTIFICATION">AFPI CERTIFICATION</option><option value="Absent (AB4)">Absent (AB4)</option><option value="Absent (AB8)">Absent (AB8)</option><option value="Annual Leave (A8)">Annual Leave (A8)</option><option value="FAILED IT CONFIG">FAILED IT CONFIG</option><option value="Half Day - Sick (S4)">Half Day - Sick (S4)</option><option value="Late">Late</option><option value="Leave (C4)">Leave (C4)</option><option value="Leave (C8)">Leave (C8)</option><option value="Paid Leave (P)">Paid Leave (P)</option><option value="Resignation">Resignation</option><option value="Sick (S8)">Sick (S8)</option>',13)])],512),[[w,s.value.status_code]])]),e("div",tt,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Proof (Image) *",-1)),e("input",{type:"file",onChange:G,accept:"image/jpeg,image/jpg,image/png",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,32),t[54]||(t[54]=e("p",{class:"text-xs text-gray-500 mt-1"},"Upload proof of attendance (max 10MB, will be compressed to 200KB)",-1))]),e("div",ot,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason for Resign",-1)),v(e("textarea",{"onUpdate:modelValue":t[18]||(t[18]=o=>s.value.reason_for_resign=o),rows:"3",placeholder:"Enter reason if applicable",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"},null,512),[[m,s.value.reason_for_resign]])])])],32)]),e("div",st,[e("button",{onClick:T,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),e("button",{onClick:U,disabled:k.value,class:"px-6 py-2 text-sm font-medium text-white bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50"},r(k.value?"Submitting...":"Submit"),9,lt)])])])):c("",!0),j.value?(i(),n("div",rt,[e("div",at,[t[73]||(t[73]=e("div",{class:"p-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50"},[e("h3",{class:"text-xl font-bold text-gray-900"},"Attendance Details")],-1)),e("div",nt,[a.value?(i(),n("div",it,[e("div",null,[t[57]||(t[57]=e("span",{class:"font-semibold"},"Employee:",-1)),d(" "+r(a.value.name)+" ("+r(a.value.staff_id)+")",1)]),e("div",null,[t[58]||(t[58]=e("span",{class:"font-semibold"},"Position:",-1)),d(" "+r(a.value.position),1)]),e("div",null,[t[59]||(t[59]=e("span",{class:"font-semibold"},"Department:",-1)),d(" "+r(a.value.department),1)]),e("div",null,[t[60]||(t[60]=e("span",{class:"font-semibold"},"Superior:",-1)),d(" "+r(a.value.superior||"-"),1)]),e("div",null,[t[61]||(t[61]=e("span",{class:"font-semibold"},"Hire Date:",-1)),d(" "+r(_(a.value.hire_date)),1)]),e("div",null,[t[62]||(t[62]=e("span",{class:"font-semibold"},"Rank:",-1)),d(" "+r(a.value.rank||"-"),1)]),e("div",null,[t[63]||(t[63]=e("span",{class:"font-semibold"},"Device:",-1)),d(" "+r(a.value.device),1)]),e("div",null,[t[64]||(t[64]=e("span",{class:"font-semibold"},"WFH/Onsite:",-1)),d(" "+r(a.value.work_status),1)]),e("div",null,[t[65]||(t[65]=e("span",{class:"font-semibold"},"Report Day:",-1)),d(" "+r(_(a.value.report_day)),1)]),e("div",null,[t[66]||(t[66]=e("span",{class:"font-semibold"},"Last Working Day:",-1)),d(" "+r(a.value.last_working_day?_(a.value.last_working_day):"-"),1)]),e("div",null,[t[67]||(t[67]=e("span",{class:"font-semibold"},"Ranking/Intervals:",-1)),d(" "+r(a.value.ranking_intervals||"-"),1)]),e("div",null,[t[68]||(t[68]=e("span",{class:"font-semibold"},"Group:",-1)),d(" "+r(a.value.group||"-"),1)]),e("div",null,[t[69]||(t[69]=e("span",{class:"font-semibold"},"Status & Code:",-1)),d(" "+r(a.value.status_code),1)]),a.value.proof?(i(),n("div",dt,[t[70]||(t[70]=e("span",{class:"font-semibold"},"Proof:",-1)),t[71]||(t[71]=e("br",null,null,-1)),e("img",{src:`/${a.value.proof}`,alt:"Proof",class:"mt-2 max-w-md rounded-lg border"},null,8,ut)])):c("",!0),e("div",pt,[t[72]||(t[72]=e("span",{class:"font-semibold"},"Reason for Resign:",-1)),d(" "+r(a.value.reason_for_resign||"-"),1)])])):c("",!0)]),e("div",{class:"p-6 border-t border-gray-200 bg-gray-50 flex justify-end"},[e("button",{onClick:Q,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Close ")])])])):c("",!0),x.value.show?(i(),n("div",{key:2,class:R(["fixed top-4 right-4 px-6 py-4 rounded-lg shadow-lg z-50 flex items-center space-x-3",x.value.type==="success"?"bg-green-500":"bg-red-500","text-white"])},[(i(),n("svg",gt,[x.value.type==="success"?(i(),n("path",vt)):(i(),n("path",mt))])),e("span",null,r(x.value.message),1)],2)):c("",!0)]))}};te(ft).mount("#app");
