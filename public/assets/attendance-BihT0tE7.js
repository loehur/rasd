import{r as c,j as b,c as l,o as n,a as e,d as g,g as v,e as f,v as w,F as k,l as D,t as o,n as x,h as A}from"./tailwind-zqB7vlTc.js";import{adminGetAttendances as C,adminDeleteAttendance as B}from"./api-DDGvwgGv.js";import"./api-n_PshMHp.js";const F={class:"min-h-screen bg-slate-950 text-slate-100"},S={class:"px-3 sm:px-6 lg:px-8 py-4"},T={class:"max-w-6xl mx-auto space-y-6"},E={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl p-6"},V={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4"},j={class:"flex items-center gap-3"},L={key:0,class:"p-6 text-slate-300"},M={key:1},N={class:"overflow-x-auto -mx-3 sm:mx-0"},z={class:"min-w-full text-sm"},H={class:"py-2 px-3 sm:px-0"},O={class:"font-medium text-slate-100"},P={class:"text-xs text-slate-400"},R={class:"py-2"},W={class:"py-2"},G={class:"py-2"},I={class:"py-2"},U={class:"py-2"},$={class:"py-2"},q={class:"py-2"},J=["onClick"],K={class:"text-white"},Q={__name:"AttendancePage",setup(X){const i=c(!1),u=c([]),p=c(new Date().toISOString().split("T")[0]),d=c({show:!1,message:"",type:"success"});b(async()=>{await m()});const m=async()=>{try{i.value=!0;const a=await C(p.value,1e3);a.success?u.value=a.data||[]:r(a.message||"Failed to load attendances","error")}catch{r("Error loading attendances","error")}finally{i.value=!1}},h=async a=>{try{const s=await B(a);s.success?(r("Attendance deleted"),await m()):r(s.message||"Delete failed","error")}catch{r("Error deleting attendance","error")}},_=a=>new Date(a).toLocaleDateString(),r=(a,s="success")=>{d.value={show:!0,message:a,type:s},setTimeout(()=>{d.value.show=!1},3e3)},y=()=>{window.location.href="/admin/dashboard"};return(a,s)=>(n(),l("div",F,[e("main",S,[e("div",T,[e("div",{class:"mb-4"},[e("button",{onClick:y,class:"text-slate-400 hover:text-slate-200 flex items-center gap-2 transition"},[...s[1]||(s[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),v(" Back to Dashboard ",-1)])])]),e("div",E,[e("div",V,[s[3]||(s[3]=e("h2",{class:"text-lg sm:text-xl font-bold"}," Attendance Records ",-1)),e("div",j,[s[2]||(s[2]=e("label",{class:"text-sm text-slate-300"},"Filter tanggal:",-1)),f(e("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),onChange:m,class:"px-3 py-2 bg-slate-800/50 border border-slate-700 rounded text-slate-100"},null,544),[[w,p.value]])])]),i.value?(n(),l("div",L," Loading... ")):(n(),l("div",M,[e("div",N,[e("table",z,[s[4]||(s[4]=e("thead",null,[e("tr",{class:"text-left text-slate-300 border-b border-slate-800"},[e("th",{class:"py-2 px-3 sm:px-0"}," Employee "),e("th",{class:"py-2"},"Position"),e("th",{class:"py-2"},"Department"),e("th",{class:"py-2"},"WFH/Onsite"),e("th",{class:"py-2"},"Device"),e("th",{class:"py-2"},"Report Day"),e("th",{class:"py-2"},"Status"),e("th",{class:"py-2"},"Actions")])],-1)),e("tbody",null,[(n(!0),l(k,null,D(u.value,t=>(n(),l("tr",{key:t.id,class:"border-b border-slate-800"},[e("td",H,[e("div",O,o(t.name),1),e("div",P,o(t.staff_id),1)]),e("td",R,o(t.position),1),e("td",W,o(t.department),1),e("td",G,[e("span",{class:x(["px-2 py-1 text-xs rounded-full border",t.work_status==="WFH"?"bg-blue-500/10 text-blue-300 border-blue-500/30":"bg-emerald-500/10 text-emerald-300 border-emerald-500/30"])},o(t.work_status),3)]),e("td",I,o(t.device),1),e("td",U,o(_(t.report_day)),1),e("td",$,o(t.status_code),1),e("td",q,[e("button",{onClick:Y=>h(t.id),class:"px-3 py-1 text-xs bg-red-600 hover:bg-red-700 rounded text-white"}," Delete ",8,J)])]))),128))])])])]))]),d.value.show?(n(),l("div",{key:0,class:x(["fixed top-4 left-1/2 -translate-x-1/2 sm:left-auto sm:translate-x-0 sm:right-4 px-4 sm:px-6 py-3 sm:py-4 rounded-lg shadow-lg z-50",d.value.type==="success"?"bg-green-600":"bg-red-600"])},[e("span",K,o(d.value.message),1)],2)):g("",!0)])])]))}};A(Q).mount("#app");
