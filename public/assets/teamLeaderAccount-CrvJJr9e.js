import{r as a,j as k,c as i,o as u,a as t,d as p,g as h,t as g,w as _,e as v,v as b,h as S}from"./tailwind-Cw3AK9J2.js";import{A as P}from"./api-rG_fphBW.js";const A={class:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"},B={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},N={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700"},U={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700"},D={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},I={__name:"AccountPage",setup(M){const m=a(""),y=a(!1),l=a(""),n=a(""),c=a(!1),d=a({employee_id:"",name:""}),r=a({name:""});k(()=>{const s=localStorage.getItem("tl_auth_token"),e=localStorage.getItem("tl_user");if(!s||!e){window.location.href="/";return}const o=JSON.parse(e);d.value=o,m.value=o.name,r.value.name=o.name,document.addEventListener("click",w=>{w.target.closest(".relative")||(y.value=!1)})});const f=async()=>{l.value="",n.value="",c.value=!0;try{const s=localStorage.getItem("tl_auth_token"),o=await(await fetch(`${P}/api/team-leader/account/name`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({name:r.value.name})})).json();o.success?(d.value.name=r.value.name,m.value=r.value.name,localStorage.setItem("tl_user",JSON.stringify(d.value)),l.value="Profile updated successfully!",setTimeout(()=>{l.value=""},3e3)):n.value=o.message||"Failed to update profile"}catch(s){n.value="An error occurred. Please try again.",console.error("Error:",s)}finally{c.value=!1}},x=()=>{window.location.href="/team-leader/dashboard"};return(s,e)=>(u(),i("div",A,[t("main",B,[t("button",{onClick:x,class:"mb-6 flex items-center gap-2 text-indigo-600 hover:text-indigo-700 transition"},[...e[2]||(e[2]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),h(" Back to Dashboard ",-1)])]),e[7]||(e[7]=t("div",{class:"mb-8"},[t("h2",{class:"text-3xl font-bold text-gray-900"}," Account Settings "),t("p",{class:"text-gray-600 mt-2"}," Update your account information ")],-1)),l.value?(u(),i("div",N,g(l.value),1)):p("",!0),n.value?(u(),i("div",U,g(n.value),1)):p("",!0),t("div",D,[e[6]||(e[6]=t("div",{class:"p-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50"},[t("h3",{class:"text-xl font-bold text-gray-900"}," Update Profile ")],-1)),t("form",{onSubmit:_(f,["prevent"]),class:"p-6 space-y-6"},[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Employee ID ",-1)),v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>d.value.employee_id=o),type:"text",readonly:"",class:"w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-500"},null,512),[[b,d.value.employee_id]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Full Name ",-1)),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.name=o),type:"text",readonly:"",class:"w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-500"},null,512),[[b,r.value.name]])]),e[5]||(e[5]=t("div",{class:"flex justify-end"},[t("button",{type:"button",disabled:"",class:"px-6 py-2 bg-gray-300 text-gray-600 font-semibold rounded-lg cursor-not-allowed"}," Update Profile (Disabled) ")],-1))],32)])])]))}};S(I).mount("#app");
