import{r as l,j as C,c as i,o as u,a as e,d as M,e as v,t as c,n as P,h as w,w as B,f as b,v as g,b as S}from"./tailwind-Bv49ST1N.js";const j={class:"min-h-screen bg-slate-950 text-slate-100"},N={class:"bg-slate-900/80 backdrop-blur border-b border-slate-800/80 sticky top-0 z-50"},V={class:"px-4 sm:px-6 lg:px-8"},A={class:"flex items-center justify-between h-16"},T={class:"relative"},D={class:"text-right"},E={class:"text-sm font-semibold"},U={class:"text-xs text-emerald-300/70"},z={key:0,class:"absolute right-0 mt-2 w-48 bg-slate-900 border border-slate-800 rounded-lg shadow-lg overflow-hidden z-50"},F={class:"p-4 sm:p-6 lg:p-8"},I={class:"max-w-2xl mx-auto"},O={key:0,class:"mb-6 p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-xl text-emerald-400"},q={key:1,class:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400"},H={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl p-6"},L={class:"mb-4"},R={class:"mb-4"},J={class:"mb-4"},$=["disabled"],G={__name:"ChangePasswordPage",setup(K){const p=l({name:"",phone_number:"",role:""}),n=l(!1),d=l(""),a=l(""),m=l(!1),s=l({current_password:"",new_password:"",confirm_password:""}),h=()=>{n.value=!n.value};C(()=>{const o=localStorage.getItem("auth_token"),t=localStorage.getItem("user");if(!o||!t){window.location.href="/admin";return}p.value=JSON.parse(t),document.addEventListener("click",r=>{r.target.closest(".relative")||(n.value=!1)})});const x=async()=>{if(d.value="",a.value="",s.value.new_password!==s.value.confirm_password){a.value="New passwords do not match";return}m.value=!0;try{const o=await fetch(`${API_BASE_URL}/api/account/password`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:s.value.current_password,new_password:s.value.new_password,phone_number:p.value.phone_number})}),t=await o.json();o.ok&&t.success?(d.value="Password changed successfully!",s.value={current_password:"",new_password:"",confirm_password:""},setTimeout(()=>{d.value=""},3e3)):a.value=t.message||"Failed to change password"}catch(o){console.error("Change password error:",o),a.value="An error occurred: "+o.message}finally{m.value=!1}},f=()=>{window.location.href="/admin/dashboard"},k=()=>{window.location.href="/admin/dashboard"},_=()=>{window.location.href="/admin/account"},y=()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/admin"};return(o,t)=>(u(),i("div",j,[e("nav",N,[e("div",V,[e("div",A,[t[7]||(t[7]=M('<div class="flex items-center gap-3"><div class="h-10 w-10 rounded-xl bg-gradient-to-br from-blue-500 to-emerald-400 flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><div><p class="text-sm font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400"> STAFF PERFORMANCE </p><p class="text-[0.65rem] text-slate-500"> Performance System </p></div></div>',1)),e("div",T,[e("button",{onClick:h,class:"flex items-center gap-2 text-emerald-400 hover:text-emerald-300 transition cursor-pointer"},[e("div",D,[e("p",E,c(p.value.name),1),e("p",U,c(p.value.role),1)]),(u(),i("svg",{class:P(["w-4 h-4 transition-transform",{"rotate-180":n.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[3]||(t[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),n.value?(u(),i("div",z,[e("button",{onClick:k,class:"w-full px-4 py-2 text-left text-sm text-slate-300 hover:bg-slate-800 transition flex items-center gap-2"},[...t[4]||(t[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),w(" Dashboard ",-1)])]),e("button",{onClick:_,class:"w-full px-4 py-2 text-left text-sm text-slate-300 hover:bg-slate-800 transition flex items-center gap-2"},[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),w(" Account ",-1)])]),e("button",{onClick:y,class:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-slate-800 transition flex items-center gap-2"},[...t[6]||(t[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),w(" Logout ",-1)])])])):v("",!0)])])])]),e("main",F,[e("div",I,[e("div",{class:"mb-8"},[e("button",{onClick:f,class:"mb-4 text-slate-400 hover:text-slate-200 flex items-center gap-2 transition"},[...t[8]||(t[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),w(" Back to Dashboard ",-1)])]),t[9]||(t[9]=e("h1",{class:"text-3xl font-black bg-clip-text text-transparent bg-gradient-to-r from-white via-slate-100 to-slate-300"}," Change Password ",-1)),t[10]||(t[10]=e("p",{class:"text-slate-400 mt-2"}," Update your password to keep your account secure ",-1))]),d.value?(u(),i("div",O,c(d.value),1)):v("",!0),a.value?(u(),i("div",q,c(a.value),1)):v("",!0),e("div",H,[e("form",{onSubmit:B(x,["prevent"])},[e("div",L,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Current Password ",-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.value.current_password=r),type:"password",required:"",class:"w-full px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition",placeholder:"Enter current password"},null,512),[[g,s.value.current_password]])]),e("div",R,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," New Password ",-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.value.new_password=r),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition",placeholder:"Enter new password (min 6 characters)"},null,512),[[g,s.value.new_password]])]),e("div",J,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Confirm New Password ",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.value.confirm_password=r),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition",placeholder:"Confirm new password"},null,512),[[g,s.value.confirm_password]])]),e("button",{type:"submit",disabled:m.value,class:"w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:bg-slate-700 text-white font-medium rounded-lg transition"},c(m.value?"Updating...":"Change Password"),9,$)],32)])])])]))}};S(G).mount("#app");
