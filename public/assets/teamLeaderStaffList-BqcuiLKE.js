import{r as d,i as c,j as I,c as l,o as a,a as t,d as S,g as B,n as y,t as o,F as h,k as f,e as G,v as F,w as T,h as W}from"./tailwind-D8AO71p9.js";import{A as E}from"./api-n_PshMHp.js";const R={class:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-6"},J={class:"max-w-7xl mx-auto"},K={class:"bg-white shadow-sm border border-indigo-100 rounded-xl p-4 mb-4"},O={class:"flex flex-wrap gap-2"},U={class:"ml-1 text-xs opacity-70"},H=["onClick"],q={class:"ml-1 text-xs opacity-70"},Q={class:"bg-white shadow-sm border border-indigo-100 rounded-xl p-4 mb-4"},X={class:"flex gap-2"},Y={key:0,class:"text-center py-12 bg-white shadow-sm border border-indigo-100 rounded-2xl"},Z={key:1,class:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center"},tt={class:"text-red-700 font-semibold"},et={key:2,class:"bg-white shadow-sm border border-indigo-100 rounded-2xl overflow-hidden"},st={class:"hidden md:block overflow-x-auto"},ot={class:"w-full"},rt={class:"divide-y divide-gray-200"},nt={class:"px-6 py-4 whitespace-nowrap"},lt={class:"text-sm font-mono text-indigo-600 font-semibold"},at={class:"px-6 py-4"},it={class:"flex items-center gap-3"},dt={class:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold"},ut={class:"text-sm font-semibold text-gray-900"},xt={class:"text-xs text-gray-500"},pt={class:"px-6 py-4"},ct={class:"text-sm text-gray-700"},gt={class:"px-6 py-4"},mt={class:"px-3 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-700 border border-purple-300"},vt={class:"px-6 py-4"},bt={class:"text-sm text-gray-600"},yt={class:"px-6 py-4"},ht={class:"text-sm text-gray-600"},ft={class:"px-6 py-4"},_t={key:0,class:"px-3 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700 border border-red-300"},kt={key:1,class:"px-3 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-700 border border-orange-300"},wt={key:2,class:"px-3 py-1 text-xs font-medium rounded-full bg-emerald-100 text-emerald-700 border border-emerald-300"},Ct={class:"px-6 py-4"},jt=["onClick"],Mt={class:"md:hidden divide-y divide-gray-200"},St=["onClick"],Bt={class:"flex items-start gap-3 mb-3"},Lt={class:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0"},At={class:"flex-1 min-w-0"},Pt={class:"text-sm font-semibold text-gray-900 truncate"},Dt={class:"text-xs text-gray-600 truncate"},Vt={class:"text-xs font-mono text-indigo-600 mt-1 font-semibold"},$t={key:0,class:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-700 border border-red-300"},Nt={key:1,class:"px-2 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-700 border border-orange-300"},zt={key:2,class:"px-2 py-1 text-xs font-medium rounded-full bg-emerald-100 text-emerald-700 border border-emerald-300"},It={class:"grid grid-cols-2 gap-2 text-xs"},Gt={class:"text-gray-700 font-medium truncate"},Ft={class:"text-gray-700 font-medium truncate"},Tt={key:0,class:"px-6 py-4 bg-gray-50 flex items-center justify-between border-t border-gray-200"},Wt={class:"text-sm text-gray-600"},Et={class:"flex gap-2"},Rt=["disabled"],Jt=["onClick"],Kt=["disabled"],Ot={key:3,class:"text-center py-12 bg-white shadow-sm border border-indigo-100 rounded-2xl"},Ut={class:"flex items-start justify-between mb-6"},Ht={class:"flex items-center gap-4"},qt={class:"w-16 h-16 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white text-2xl font-bold"},Qt={class:"text-2xl font-bold text-gray-900"},Xt={class:"text-gray-600"},Yt={class:"grid grid-cols-2 gap-4"},Zt={class:"text-sm text-gray-900 font-mono"},te={class:"text-sm text-gray-900"},ee={class:"text-sm text-gray-900"},se={class:"text-sm text-gray-900"},oe={class:"text-sm text-gray-900"},re={class:"text-sm text-gray-900"},ne={class:"text-sm text-gray-900"},le={class:"text-sm text-gray-900"},ae={class:"text-sm text-gray-900"},ie={class:"text-sm text-gray-900"},de={class:"text-sm text-gray-900"},ue={class:"text-sm text-gray-900"},xe={class:"text-sm text-gray-900"},pe={key:0,class:"col-span-2"},ce={class:"text-sm text-gray-900"},ge={__name:"TeamLeaderStaffList",setup(me){const u=d([]),_=d(!1),g=d(""),m=d(""),k=d(""),w=d(""),x=d(""),i=d(1),v=d(5),n=d(null),D=["P-1","P","A1-1","A1-2","A1-3","A2","B1","B2","M2"],L=async()=>{_.value=!0,g.value="";try{if(!localStorage.getItem("tl_auth_token")){window.location.href="/";return}const s=await(await fetch(`${E}/api/staff`,{method:"GET",headers:{Accept:"application/json"}})).json();s.success?u.value=s.data||[]:g.value="Failed to load staff data"}catch(r){g.value="Connection error. Please make sure you're logged in.",console.error("Load error:",r)}finally{_.value=!1}},b=c(()=>{let r=u.value;if(x.value&&(r=r.filter(e=>e.group===x.value)),m.value){const e=m.value.toLowerCase();r=r.filter(s=>s.name.toLowerCase().includes(e)||s.staff_id.toLowerCase().includes(e)||s.phone_number.includes(e))}return k.value&&(r=r.filter(e=>e.department===k.value)),w.value&&(r=r.filter(e=>e.position===w.value)),r});c(()=>[...new Set(u.value.map(r=>r.department))].filter(Boolean)),c(()=>[...new Set(u.value.map(r=>r.position))].filter(Boolean)),c(()=>u.value.reduce((r,e)=>r+(e.ojk_case||0),0));const C=c(()=>Math.ceil(b.value.length/v.value)),A=c(()=>{const r=(i.value-1)*v.value,e=r+v.value;return b.value.slice(r,e)}),V=c(()=>{const r=[];let s=Math.max(1,i.value-Math.floor(2.5)),p=Math.min(C.value,s+5-1);p-s<4&&(s=Math.max(1,p-5+1));for(let M=s;M<=p;M++)r.push(M);return r}),j=r=>r.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2),$=r=>u.value.filter(e=>e.group===r).length,P=r=>{n.value=r},N=()=>{window.location.href="/team-leader/dashboard"},z=()=>{m.value="",k.value="",w.value="",x.value="",i.value=1};return I(()=>{if(!localStorage.getItem("tl_auth_token")){window.location.href="/";return}L()}),(r,e)=>(a(),l("div",R,[t("div",J,[t("div",{class:"mb-8"},[t("button",{onClick:N,class:"mb-4 text-indigo-600 hover:text-indigo-800 flex items-center gap-2 transition"},[...e[7]||(e[7]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),B(" Back to Dashboard ",-1)])]),e[8]||(e[8]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h1",{class:"text-3xl font-black bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-700"}," All Staff ")])],-1))]),t("div",K,[e[10]||(e[10]=t("div",{class:"flex items-center gap-2 mb-3"},[t("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),t("span",{class:"text-sm font-medium text-gray-700"},"Filter by Group:")],-1)),t("div",O,[t("button",{onClick:e[0]||(e[0]=s=>x.value=""),class:y(["px-4 py-2 text-sm font-medium rounded-lg transition",x.value===""?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[e[9]||(e[9]=B(" All ",-1)),t("span",U,"("+o(u.value.length)+")",1)],2),(a(),l(h,null,f(D,s=>t("button",{key:s,onClick:p=>x.value=s,class:y(["px-4 py-2 text-sm font-medium rounded-lg transition",x.value===s?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[B(o(s)+" ",1),t("span",q,"("+o($(s))+")",1)],10,H)),64))])]),t("div",Q,[t("div",X,[G(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),type:"text",placeholder:"Search by name, staff ID, or phone...",class:"flex-1 px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition"},null,512),[[F,m.value]]),t("button",{onClick:z,class:"px-3 py-2 text-sm bg-gray-100 border border-gray-300 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition flex items-center justify-center",title:"Reset search"},[...e[11]||(e[11]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),_.value?(a(),l("div",Y,[...e[12]||(e[12]=[t("div",{class:"inline-block w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"},null,-1),t("p",{class:"text-gray-600 mt-4"},"Loading staff data...",-1)])])):g.value?(a(),l("div",Z,[e[13]||(e[13]=t("svg",{class:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",tt,o(g.value),1),t("button",{onClick:L,class:"mt-4 px-4 py-2 bg-red-100 text-red-700 border border-red-300 rounded-lg hover:bg-red-200 transition"}," Retry ")])):b.value.length>0?(a(),l("div",et,[t("div",st,[t("table",ot,[e[15]||(e[15]=t("thead",{class:"bg-gradient-to-r from-indigo-50 to-purple-50"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Staff ID "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Name "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Position "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Department "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Phone "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Work Location "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",rt,[(a(!0),l(h,null,f(A.value,s=>(a(),l("tr",{key:s.id,class:"hover:bg-indigo-50/50 transition"},[t("td",nt,[t("span",lt,o(s.staff_id),1)]),t("td",at,[t("div",it,[t("div",dt,o(j(s.name)),1),t("div",null,[t("p",ut,o(s.name),1),t("p",xt,o(s.email||"No email"),1)])])]),t("td",pt,[t("span",ct,o(s.position),1)]),t("td",gt,[t("span",mt,o(s.department),1)]),t("td",vt,[t("span",bt,o(s.phone_number),1)]),t("td",yt,[t("span",ht,o(s.work_location||"-"),1)]),t("td",ft,[s.ojk_case>0?(a(),l("span",_t," OJK Case ")):s.warning_letter?(a(),l("span",kt," Warning ")):(a(),l("span",wt," Active "))]),t("td",Ct,[t("button",{onClick:p=>P(s),class:"text-indigo-600 hover:text-indigo-800 transition"},[...e[14]||(e[14]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,jt)])]))),128))])])]),t("div",Mt,[(a(!0),l(h,null,f(A.value,s=>(a(),l("div",{key:s.id,onClick:p=>P(s),class:"p-4 hover:bg-indigo-50/50 transition cursor-pointer"},[t("div",Bt,[t("div",Lt,o(j(s.name)),1),t("div",At,[t("h3",Pt,o(s.name),1),t("p",Dt,o(s.position),1),t("p",Vt,o(s.staff_id),1)]),t("div",null,[s.ojk_case>0?(a(),l("span",$t," OJK ")):s.warning_letter?(a(),l("span",Nt," Warning ")):(a(),l("span",zt," Active "))])]),t("div",It,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-gray-500"},"Department",-1)),t("p",Gt,o(s.department),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"text-gray-500"},"Phone",-1)),t("p",Ft,o(s.phone_number),1)])])],8,St))),128))]),C.value>1?(a(),l("div",Tt,[t("p",Wt," Showing "+o((i.value-1)*v.value+1)+" to "+o(Math.min(i.value*v.value,b.value.length))+" of "+o(b.value.length)+" staff ",1),t("div",Et,[t("button",{onClick:e[2]||(e[2]=s=>i.value--),disabled:i.value===1,class:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Rt),(a(!0),l(h,null,f(V.value,s=>(a(),l("button",{key:s,onClick:p=>i.value=s,class:y(["px-4 py-2 border rounded-lg transition",i.value===s?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"])},o(s),11,Jt))),128)),t("button",{onClick:e[3]||(e[3]=s=>i.value++),disabled:i.value===C.value,class:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Kt)])])):S("",!0)])):(a(),l("div",Ot,[...e[18]||(e[18]=[t("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),t("p",{class:"text-gray-600 text-lg"},"No staff found",-1)])])),n.value?(a(),l("div",{key:4,onClick:e[6]||(e[6]=s=>n.value=null),class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50"},[t("div",{onClick:e[5]||(e[5]=T(()=>{},["stop"])),class:"bg-white border border-indigo-100 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-xl"},[t("div",Ut,[t("div",Ht,[t("div",qt,o(j(n.value.name)),1),t("div",null,[t("h2",Qt,o(n.value.name),1),t("p",Xt,o(n.value.position),1)])]),t("button",{onClick:e[4]||(e[4]=s=>n.value=null),class:"text-gray-400 hover:text-gray-700 transition"},[...e[19]||(e[19]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Yt,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Staff ID ",-1)),t("p",Zt,o(n.value.staff_id),1)]),t("div",null,[e[21]||(e[21]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Department ",-1)),t("p",te,o(n.value.department),1)]),t("div",null,[e[22]||(e[22]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Phone Number ",-1)),t("p",ee,o(n.value.phone_number),1)]),t("div",null,[e[23]||(e[23]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Email ",-1)),t("p",se,o(n.value.email||"-"),1)]),t("div",null,[e[24]||(e[24]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Superior ",-1)),t("p",oe,o(n.value.superior||"-"),1)]),t("div",null,[e[25]||(e[25]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Group ",-1)),t("p",re,o(n.value.group||"-"),1)]),t("div",null,[e[26]||(e[26]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Area ",-1)),t("p",ne,o(n.value.area||"-"),1)]),t("div",null,[e[27]||(e[27]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Work Location ",-1)),t("p",le,o(n.value.work_location||"-"),1)]),t("div",null,[e[28]||(e[28]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Hire Date ",-1)),t("p",ae,o(n.value.hire_date),1)]),t("div",null,[e[29]||(e[29]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Rank ",-1)),t("p",ie,o(n.value.rank||"-"),1)]),t("div",null,[e[30]||(e[30]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Device ",-1)),t("p",de,o(n.value.device||"-"),1)]),t("div",null,[e[31]||(e[31]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Team Leader ID ",-1)),t("p",ue,o(n.value.team_leader_id||"-"),1)]),t("div",null,[e[32]||(e[32]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Warning Letter ",-1)),t("p",xe,o(n.value.warning_letter||"-"),1)]),t("div",null,[e[33]||(e[33]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," OJK Case ",-1)),t("p",{class:y(["text-sm font-semibold",n.value.ojk_case>0?"text-red-600":"text-emerald-600"])},o(n.value.ojk_case),3)]),n.value.notes?(a(),l("div",pe,[e[34]||(e[34]=t("p",{class:"text-xs text-gray-500 uppercase mb-1"}," Notes ",-1)),t("p",ce,o(n.value.notes),1)])):S("",!0)])])])):S("",!0)])]))}};W(ge).mount("#app");
