import{r as d,j as D,c as a,o as n,p as z,a as e,d as v,b as B,e as _,v as w,t as i,F as I,l as V,w as F,g as P,n as T,h as L}from"./tailwind-DNrR0bkN.js";import{_ as U}from"./AdminHeader-KbfMcPGE.js";import{A as k}from"./api-rG_fphBW.js";const R={class:"min-h-screen bg-slate-950 text-slate-100"},q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},J={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-xl shadow-sm"},O={class:"px-6 py-4 border-b border-slate-800/80"},Q={class:"mt-4"},Y={class:"flex gap-3"},G={class:"flex-1"},H={key:0,class:"mt-1 text-sm text-red-400"},K=["disabled"],W={key:0,class:"p-8 text-center"},X={key:1,class:"p-8 text-center text-red-400"},Z={key:2,class:"overflow-x-auto"},ee={class:"w-full"},te={class:"divide-y divide-slate-800/80"},se={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-200"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-slate-300"},ae={class:"px-6 py-4 whitespace-nowrap text-sm text-slate-400"},ne={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-emerald-400"},re={class:"px-6 py-4 text-sm text-slate-400"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-slate-500"},ie={class:"px-6 py-4 whitespace-nowrap text-sm"},de={class:"flex gap-2"},ce=["onClick"],ue=["onClick"],pe={key:3,class:"p-8 text-center text-slate-500"},me={key:0,class:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50"},he={class:"bg-slate-900 border border-slate-700 rounded-xl shadow-2xl p-6 max-w-md w-full mx-4"},xe={class:"flex gap-3 justify-end mt-6"},be=["disabled"],ve={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},fe={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},ge={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},ye={__name:"AdminPhoneNumbersApp",setup(_e){const f=d([]),g=d(!0),h=d(""),b=d(!1),p=d({show:!1,message:"",type:"success"}),r=d(""),m=d(""),y=d(!1),l=d({id:null,phone_number:"",remarks:""});D(()=>{x()});const x=async()=>{g.value=!0,h.value="";try{const o=localStorage.getItem("auth_token");let t=`${k}/api/phone-numbers`;r.value&&r.value.length>=8&&(t+=`?search=${encodeURIComponent(r.value)}`);const u=await(await fetch(t,{headers:{Authorization:`Bearer ${o}`,Accept:"application/json"}})).json();u.success?f.value=u.data:h.value=u.message||"Failed to fetch phone numbers"}catch(o){h.value="Failed to connect to server",console.error("Error:",o)}finally{g.value=!1}},S=()=>{m.value="",r.value.length>0&&r.value.length<8&&(m.value="Please enter at least 8 digits")},C=async()=>{if(r.value.length>0&&r.value.length<8){m.value="Please enter at least 8 digits";return}x()},A=()=>{r.value="",m.value="",x()},E=o=>{l.value={id:o.id,phone_number:o.phone_number,remarks:o.remarks},y.value=!0},j=async()=>{if(!l.value.phone_number.trim()){c("Please enter a phone number","error");return}if(!l.value.remarks.trim()){c("Please enter remarks","error");return}b.value=!0;try{const o=localStorage.getItem("auth_token"),s=await(await fetch(`${k}/api/phone-numbers/${l.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({phone_number:l.value.phone_number,remarks:l.value.remarks})})).json();s.success?(c("Phone number updated successfully!","success"),N(),x()):c(s.message||"Failed to update phone number","error")}catch(o){c("Failed to connect to server","error"),console.error("Error:",o)}finally{b.value=!1}},N=()=>{y.value=!1,l.value={id:null,phone_number:"",remarks:""}},M=async o=>{if(confirm("Are you sure you want to delete this phone number?"))try{const t=localStorage.getItem("auth_token"),u=await(await fetch(`${k}/api/phone-numbers/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}})).json();u.success?(c("Phone number deleted successfully","success"),x()):c(u.message||"Failed to delete phone number","error")}catch(t){c("Failed to connect to server","error"),console.error("Error:",t)}},$=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",c=(o,t="success")=>{p.value={show:!0,message:o,type:t},setTimeout(()=>{p.value.show=!1},3e3)};return(o,t)=>(n(),a("div",R,[z(U,{title:"Phone Numbers",subtitle:"Manage Contact Information"}),e("main",q,[t[6]||(t[6]=B('<div class="mb-6"><h1 class="text-2xl font-bold text-slate-100">Phone Numbers Management</h1><p class="text-sm text-slate-400 mt-1">View, edit, and manage phone numbers from all staff</p></div><div class="mb-6 bg-blue-900/20 border border-blue-800/50 rounded-lg p-4"><div class="flex items-start gap-3"><svg class="w-5 h-5 text-blue-400 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class="text-sm text-blue-200"> As admin, you can view all phone numbers from all staff. You can edit and delete entries, but cannot add new ones (staff add their own data). </p></div></div>',2)),e("div",J,[e("div",O,[t[3]||(t[3]=e("div",{class:"flex items-center justify-between"},[e("h2",{class:"text-lg font-bold text-slate-100"},"Phone Numbers List"),e("div",{class:"text-sm text-slate-500"},"Showing last 20 entries")],-1)),e("div",Q,[e("div",Y,[e("div",G,[_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),type:"text",placeholder:"Search phone number (min. 8 digits)",class:"w-full px-4 py-2 bg-slate-950 border border-slate-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-slate-100 placeholder-slate-500",onInput:S},null,544),[[w,r.value]]),m.value?(n(),a("p",H,i(m.value),1)):v("",!0)]),e("button",{onClick:C,disabled:r.value.length>0&&r.value.length<8,class:"px-6 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Search ",8,K),r.value?(n(),a("button",{key:0,onClick:A,class:"px-6 py-2 bg-slate-700 text-slate-200 font-semibold rounded-lg hover:bg-slate-600 transition-colors"}," Clear ")):v("",!0)])])]),g.value?(n(),a("div",W,[...t[4]||(t[4]=[e("div",{class:"inline-block h-8 w-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"},null,-1),e("p",{class:"mt-2 text-slate-400"},"Loading...",-1)])])):h.value?(n(),a("div",X,i(h.value),1)):f.value.length>0?(n(),a("div",Z,[e("table",ee,[t[5]||(t[5]=e("thead",{class:"bg-slate-800/50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider"}," Employee ID "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider"}," Employee Name "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider"}," Team Leader "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider"}," Phone Number "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider"}," Remarks "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider"}," Date Added "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",te,[(n(!0),a(I,null,V(f.value,s=>(n(),a("tr",{key:s.id,class:"hover:bg-slate-800/30 transition-colors"},[e("td",se,i(s.staff_id),1),e("td",oe,i(s.employee_name),1),e("td",ae,i(s.team_leader_name||"-"),1),e("td",ne,i(s.phone_number),1),e("td",re,i(s.remarks||"-"),1),e("td",le,i($(s.created_at)),1),e("td",ie,[e("div",de,[e("button",{onClick:u=>E(s),class:"text-indigo-400 hover:text-indigo-300 font-medium transition-colors"}," Edit ",8,ce),e("button",{onClick:u=>M(s.id),class:"text-rose-400 hover:text-rose-300 font-medium transition-colors"}," Delete ",8,ue)])])]))),128))])])])):(n(),a("div",pe," No phone numbers found. "))])]),y.value?(n(),a("div",me,[e("div",he,[t[9]||(t[9]=e("h3",{class:"text-xl font-bold text-slate-100 mb-4"},"Edit Phone Number",-1)),e("form",{onSubmit:F(j,["prevent"]),class:"space-y-4"},[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},[P(" Phone Number "),e("span",{class:"text-rose-500"},"*")],-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.phone_number=s),type:"tel",required:"",class:"w-full px-4 py-2 bg-slate-950 border border-slate-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-slate-100 placeholder-slate-500"},null,512),[[w,l.value.phone_number]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-slate-300 mb-2"},[P(" Remarks "),e("span",{class:"text-rose-500"},"*")],-1)),_(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.remarks=s),type:"text",required:"",class:"w-full px-4 py-2 bg-slate-950 border border-slate-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-slate-100 placeholder-slate-500"},null,512),[[w,l.value.remarks]])]),e("div",xe,[e("button",{type:"button",onClick:N,class:"px-4 py-2 border border-slate-600 text-slate-300 rounded-lg hover:bg-slate-800 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:b.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-500 disabled:opacity-50 transition-colors"},i(b.value?"Saving...":"Save Changes"),9,be)])],32)])])):v("",!0),p.value.show?(n(),a("div",{key:1,class:T(["fixed top-4 right-4 px-6 py-4 rounded-lg shadow-lg z-50 flex items-center space-x-3",p.value.type==="success"?"bg-emerald-600":"bg-rose-600","text-white"])},[(n(),a("svg",ve,[p.value.type==="success"?(n(),a("path",fe)):(n(),a("path",ge))])),e("span",null,i(p.value.message),1)],2)):v("",!0)]))}};L(ye).mount("#app");
