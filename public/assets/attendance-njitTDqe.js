import{r as c,j as g,c as l,o as n,a as e,g as y,d as v,e as f,v as w,F as k,k as D,t as o,n as u,h as A}from"./tailwind-BZyNWKWO.js";import{adminGetAttendances as C,adminDeleteAttendance as B}from"./api-DDGvwgGv.js";import"./api-n_PshMHp.js";const F={class:"min-h-screen bg-slate-950 text-slate-100"},S={class:"px-3 sm:px-6 lg:px-8 py-4"},T={class:"max-w-6xl mx-auto space-y-6"},j={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl p-6"},E={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4"},V={class:"flex items-center gap-3"},z={key:0,class:"p-6 text-slate-300"},L={key:1},M={class:"overflow-x-auto -mx-3 sm:mx-0"},N={class:"min-w-full text-sm"},H={class:"py-2 px-3 sm:px-0"},O={class:"font-medium text-slate-100"},P={class:"text-xs text-slate-400"},R={class:"py-2"},W={class:"py-2"},G={class:"py-2"},I={class:"py-2"},U={class:"py-2"},$={class:"py-2"},q={class:"py-2"},J=["onClick"],K={class:"text-white"},Q={__name:"AttendancePage",setup(X){const i=c(!1),x=c([]),p=c(new Date().toISOString().split("T")[0]),r=c({show:!1,message:"",type:"success"});g(async()=>{await m()});const m=async()=>{try{i.value=!0;const a=await C(p.value,1e3);a.success?x.value=a.data||[]:d(a.message||"Failed to load attendances","error")}catch{d("Error loading attendances","error")}finally{i.value=!1}},b=async a=>{try{const t=await B(a);t.success?(d("Attendance deleted"),await m()):d(t.message||"Delete failed","error")}catch{d("Error deleting attendance","error")}},h=a=>new Date(a).toLocaleDateString(),d=(a,t="success")=>{r.value={show:!0,message:a,type:t},setTimeout(()=>{r.value.show=!1},3e3)},_=()=>{window.location.href="/admin/dashboard"};return(a,t)=>(n(),l("div",F,[e("nav",{class:"bg-slate-900/80 backdrop-blur border-b border-slate-800/80 sticky top-0 z-50"},[e("div",{class:"px-3 sm:px-6 lg:px-8 h-16 flex items-center justify-between"},[e("div",{class:"flex items-center gap-3"},[e("button",{onClick:_,class:"text-slate-300 hover:text-slate-100 text-sm flex items-center gap-2"},[...t[1]||(t[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),y(" Back to Dashboard ",-1)])]),t[2]||(t[2]=e("span",{class:"hidden sm:inline text-sm font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400"},"Attendance",-1))])])]),e("main",S,[e("div",T,[e("div",j,[e("div",E,[t[4]||(t[4]=e("h2",{class:"text-lg sm:text-xl font-bold"}," Attendance Records ",-1)),e("div",V,[t[3]||(t[3]=e("label",{class:"text-sm text-slate-300"},"Filter tanggal:",-1)),f(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),onChange:m,class:"px-3 py-2 bg-slate-800/50 border border-slate-700 rounded text-slate-100"},null,544),[[w,p.value]])])]),i.value?(n(),l("div",z," Loading... ")):(n(),l("div",L,[e("div",M,[e("table",N,[t[5]||(t[5]=e("thead",null,[e("tr",{class:"text-left text-slate-300 border-b border-slate-800"},[e("th",{class:"py-2 px-3 sm:px-0"}," Employee "),e("th",{class:"py-2"},"Position"),e("th",{class:"py-2"},"Department"),e("th",{class:"py-2"},"WFH/Onsite"),e("th",{class:"py-2"},"Device"),e("th",{class:"py-2"},"Report Day"),e("th",{class:"py-2"},"Status"),e("th",{class:"py-2"},"Actions")])],-1)),e("tbody",null,[(n(!0),l(k,null,D(x.value,s=>(n(),l("tr",{key:s.id,class:"border-b border-slate-800"},[e("td",H,[e("div",O,o(s.name),1),e("div",P,o(s.staff_id),1)]),e("td",R,o(s.position),1),e("td",W,o(s.department),1),e("td",G,[e("span",{class:u(["px-2 py-1 text-xs rounded-full border",s.work_status==="WFH"?"bg-blue-500/10 text-blue-300 border-blue-500/30":"bg-emerald-500/10 text-emerald-300 border-emerald-500/30"])},o(s.work_status),3)]),e("td",I,o(s.device),1),e("td",U,o(h(s.report_day)),1),e("td",$,o(s.status_code),1),e("td",q,[e("button",{onClick:Y=>b(s.id),class:"px-3 py-1 text-xs bg-red-600 hover:bg-red-700 rounded text-white"}," Delete ",8,J)])]))),128))])])])]))]),r.value.show?(n(),l("div",{key:0,class:u(["fixed top-4 left-1/2 -translate-x-1/2 sm:left-auto sm:translate-x-0 sm:right-4 px-4 sm:px-6 py-3 sm:py-4 rounded-lg shadow-lg z-50",r.value.type==="success"?"bg-green-600":"bg-red-600"])},[e("span",K,o(r.value.message),1)],2)):v("",!0)])])]))}};A(Q).mount("#app");
