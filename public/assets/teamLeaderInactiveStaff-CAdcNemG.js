import{r as p,i as h,j as L,c as a,o as n,a as t,g as f,n as x,t as o,F as m,l as b,e as B,v as M,h as j}from"./tailwind-Dyvs-uiX.js";import{A as Y}from"./api-n_PshMHp.js";const F={class:"min-h-screen bg-gradient-to-br from-gray-50 via-slate-50 to-gray-100 p-6"},I={class:"max-w-7xl mx-auto"},R={class:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 mb-4"},V={class:"flex flex-wrap gap-2"},A={class:"ml-1 text-xs opacity-70"},z=["onClick"],N={class:"ml-1 text-xs opacity-70"},P={class:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 mb-4"},T={class:"flex gap-2"},$={key:0,class:"text-center py-12 bg-white shadow-sm border border-gray-200 rounded-2xl"},E={key:1,class:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center"},U={class:"text-red-700 font-semibold"},H={key:2,class:"bg-white shadow-sm border border-gray-200 rounded-2xl overflow-hidden"},W={class:"hidden md:block overflow-x-auto"},q={class:"w-full text-xs"},G={class:"px-3 py-2 text-gray-600 font-semibold"},Q={class:"px-3 py-2 text-gray-600 font-mono font-semibold"},J={class:"px-3 py-2"},K={class:"px-3 py-2"},O={class:"px-3 py-2"},X={class:"px-3 py-2"},Z={class:"px-3 py-2"},tt=["title"],et={class:"md:hidden divide-y divide-gray-200"},rt={class:"flex items-start justify-between mb-3"},st={class:"flex-1 min-w-0"},ot={class:"text-sm font-semibold text-gray-900"},at={class:"text-xs font-mono text-gray-600 mt-1"},nt={class:"grid grid-cols-2 gap-2 text-xs"},lt={class:"text-gray-700 font-medium"},dt={class:"text-gray-700 font-medium"},it={class:"text-gray-700 font-medium truncate"},ut={class:"text-gray-700 font-medium truncate"},pt={class:"col-span-2"},ct={class:"text-gray-700 text-xs mt-1 line-clamp-2"},xt={key:3,class:"text-center py-12 bg-white shadow-sm border border-gray-200 rounded-2xl"},gt={__name:"InactiveStaffList",setup(yt){const d=p([]),g=p(!1),i=p(""),u=p(""),l=p(new Date().getFullYear()),_=h(()=>{const s=d.value.map(e=>new Date(e.report_day).getFullYear());return[...new Set(s)].sort((e,r)=>r-e)}),w=async()=>{g.value=!0,i.value="";try{const s=localStorage.getItem("tl_auth_token");if(!s){window.location.href="/";return}const r=await(await fetch(`${Y}/api/resignations?per_page=1000`,{method:"GET",headers:{Authorization:`Bearer ${s}`,Accept:"application/json"}})).json();r.success?(d.value=r.data||[],d.value.sort((v,S)=>new Date(S.report_day)-new Date(v.report_day))):i.value="Failed to load resignation data"}catch(s){i.value="Connection error. Please make sure you're logged in.",console.error("Load error:",s)}finally{g.value=!1}},y=h(()=>{let s=d.value;if(l.value&&(s=s.filter(e=>new Date(e.report_day).getFullYear()===l.value)),u.value){const e=u.value.toLowerCase();s=s.filter(r=>r.staff_name?.toLowerCase().includes(e)||r.staff_id?.toLowerCase().includes(e)||r.reason?.toLowerCase().includes(e))}return s}),k=s=>d.value.filter(e=>new Date(e.report_day).getFullYear()===s).length,c=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",C=()=>{window.location.href="/team-leader/dashboard"},D=()=>{u.value="",l.value=""};return L(()=>{if(!localStorage.getItem("tl_auth_token")){window.location.href="/";return}w()}),(s,e)=>(n(),a("div",F,[t("div",I,[t("div",{class:"mb-8"},[t("button",{onClick:C,class:"mb-4 text-gray-600 hover:text-gray-800 flex items-center gap-2 transition"},[...e[3]||(e[3]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),f(" Back to Dashboard ",-1)])]),e[4]||(e[4]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h1",{class:"text-3xl font-black bg-clip-text text-transparent bg-gradient-to-r from-gray-600 via-slate-600 to-gray-700"}," Inactive Staff "),t("p",{class:"text-sm text-gray-600 mt-1"}," Staff members who are no longer active ")])],-1))]),t("div",R,[e[6]||(e[6]=t("div",{class:"flex items-center gap-2 mb-3"},[t("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),t("span",{class:"text-sm font-medium text-gray-700"},"Filter by Year:")],-1)),t("div",V,[t("button",{onClick:e[0]||(e[0]=r=>l.value=""),class:x(["px-4 py-2 text-sm font-medium rounded-lg transition",l.value===""?"bg-gray-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[e[5]||(e[5]=f(" All Years ",-1)),t("span",A,"("+o(d.value.length)+")",1)],2),(n(!0),a(m,null,b(_.value,r=>(n(),a("button",{key:r,onClick:v=>l.value=r,class:x(["px-4 py-2 text-sm font-medium rounded-lg transition",l.value===r?"bg-slate-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[f(o(r)+" ",1),t("span",N,"("+o(k(r))+")",1)],10,z))),128))])]),t("div",P,[t("div",T,[B(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>u.value=r),type:"text",placeholder:"Search by name, staff ID, or phone...",class:"flex-1 px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:border-gray-500 focus:ring-2 focus:ring-gray-200 transition"},null,512),[[M,u.value]]),t("button",{onClick:D,class:"px-3 py-2 text-sm bg-gray-100 border border-gray-300 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition flex items-center justify-center",title:"Reset search"},[...e[7]||(e[7]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),g.value?(n(),a("div",$,[...e[8]||(e[8]=[t("div",{class:"inline-block w-12 h-12 border-4 border-gray-200 border-t-gray-600 rounded-full animate-spin"},null,-1),t("p",{class:"text-gray-600 mt-4"},"Loading inactive staff data...",-1)])])):i.value?(n(),a("div",E,[e[9]||(e[9]=t("svg",{class:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",U,o(i.value),1),t("button",{onClick:e[2]||(e[2]=(...r)=>s.loadStaff&&s.loadStaff(...r)),class:"mt-4 px-4 py-2 bg-red-100 text-red-700 border border-red-300 rounded-lg hover:bg-red-200 transition"}," Retry ")])):y.value.length>0?(n(),a("div",H,[t("div",W,[t("table",q,[e[10]||(e[10]=t("thead",{class:"bg-gradient-to-r from-gray-50 to-slate-50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Report Day "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," ID Staff "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Name Staff "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Position "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Superior "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Last Working Day "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Type "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Reason ")])],-1)),t("tbody",null,[(n(!0),a(m,null,b(y.value,r=>(n(),a("tr",{key:r.id,class:"hover:bg-gray-50/50 transition border-t border-gray-200"},[t("td",G,o(c(r.report_day)),1),t("td",Q,o(r.staff_id),1),t("td",J,o(r.staff_name),1),t("td",K,o(r.staff_position||"-"),1),t("td",O,o(r.staff_superior||"-"),1),t("td",X,o(c(r.last_working_day)),1),t("td",Z,[t("span",{class:x(["px-2 py-1 text-xs font-medium rounded-full",r.resignation_type==="voluntary"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-orange-100 text-orange-700 border border-orange-300"])},o(r.resignation_type==="voluntary"?"Voluntary":"Involuntary"),3)]),t("td",{class:"px-3 py-2 max-w-xs truncate",title:r.reason},o(r.reason),9,tt)]))),128))])])]),t("div",et,[(n(!0),a(m,null,b(y.value,r=>(n(),a("div",{key:r.id,class:"p-4 hover:bg-gray-50/50 transition"},[t("div",rt,[t("div",st,[t("h3",ot,o(r.staff_name),1),t("p",at,o(r.staff_id),1)]),t("span",{class:x(["px-2 py-1 text-xs font-medium rounded-full",r.resignation_type==="voluntary"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-orange-100 text-orange-700 border border-orange-300"])},o(r.resignation_type==="voluntary"?"Voluntary":"Involuntary"),3)]),t("div",nt,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-gray-500"},"Report Day",-1)),t("p",lt,o(c(r.report_day)),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-gray-500"},"Last Working Day",-1)),t("p",dt,o(c(r.last_working_day)),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-gray-500"},"Position",-1)),t("p",it,o(r.staff_position||"-"),1)]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-gray-500"},"Superior",-1)),t("p",ut,o(r.staff_superior||"-"),1)]),t("div",pt,[e[15]||(e[15]=t("p",{class:"text-gray-500"},"Reason",-1)),t("p",ct,o(r.reason),1)])])]))),128))])])):(n(),a("div",xt,[...e[16]||(e[16]=[t("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),t("p",{class:"text-gray-600 text-lg"}," No resignation records found ",-1)])]))])]))}};j(gt).mount("#app");
