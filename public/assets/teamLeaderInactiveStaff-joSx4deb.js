import{r as g,i as w,j as $,c as a,o as n,a as t,g as b,n as y,t as s,F as h,l as v,e as j,v as R,h as F}from"./tailwind-Cyk5UPZk.js";import{A as I}from"./api-rG_fphBW.js";const V={class:"min-h-screen bg-gradient-to-br from-gray-50 via-slate-50 to-gray-100 p-6"},A={class:"max-w-7xl mx-auto"},z={class:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 mb-4"},N={class:"flex flex-wrap gap-2"},P={class:"ml-1 text-xs opacity-70"},T=["onClick"],U={class:"ml-1 text-xs opacity-70"},Y={class:"bg-white shadow-sm border border-gray-200 rounded-xl p-4 mb-4"},E={class:"flex gap-2"},H={key:0,class:"text-center py-12 bg-white shadow-sm border border-gray-200 rounded-2xl"},W={key:1,class:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center"},q={class:"text-red-700 font-semibold"},G={key:2,class:"bg-white shadow-sm border border-gray-200 rounded-2xl overflow-hidden"},Q={class:"hidden md:block overflow-x-auto"},J={class:"w-full text-xs"},K={class:"px-3 py-2 text-gray-600 font-semibold"},O={class:"px-3 py-2 text-gray-600 font-mono font-semibold"},X={class:"px-3 py-2"},Z={class:"px-3 py-2"},tt={class:"px-3 py-2"},et={class:"px-3 py-2"},ot={class:"px-3 py-2"},rt=["title"],st={class:"md:hidden divide-y divide-gray-200"},at={class:"flex items-start justify-between mb-3"},nt={class:"flex-1 min-w-0"},lt={class:"text-sm font-semibold text-gray-900"},dt={class:"text-xs font-mono text-gray-600 mt-1"},it={class:"grid grid-cols-2 gap-2 text-xs"},ut={class:"text-gray-700 font-medium"},ct={class:"text-gray-700 font-medium"},pt={class:"text-gray-700 font-medium truncate"},gt={class:"text-gray-700 font-medium truncate"},xt={class:"col-span-2"},yt={class:"text-gray-700 text-xs mt-1 line-clamp-2"},ft={key:3,class:"text-center py-12 bg-white shadow-sm border border-gray-200 rounded-2xl"},mt={__name:"InactiveStaffList",setup(bt){const u=g([]),f=g(!1),c=g(""),p=g(""),_=new Date,d=g(`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}`),k=w(()=>{const r=u.value.map(o=>{const e=new Date(o.report_day),l=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0");return`${l}-${i}`});return[...new Set(r)].sort((o,e)=>e.localeCompare(o))}),S=async()=>{f.value=!0,c.value="";try{const r=localStorage.getItem("tl_auth_token");if(!r){window.location.href="/";return}const e=await(await fetch(`${I}/api/resignations?per_page=1000`,{method:"GET",headers:{Authorization:`Bearer ${r}`,Accept:"application/json"}})).json();e.success?(u.value=e.data||[],u.value.sort((l,i)=>new Date(i.report_day)-new Date(l.report_day))):c.value="Failed to load resignation data"}catch(r){c.value="Connection error. Please make sure you're logged in.",console.error("Load error:",r)}finally{f.value=!1}},m=w(()=>{let r=u.value;if(d.value&&(r=r.filter(o=>{const e=new Date(o.report_day),l=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0");return`${l}-${i}`===d.value})),p.value){const o=p.value.toLowerCase();r=r.filter(e=>e.staff_name?.toLowerCase().includes(o)||e.staff_id?.toLowerCase().includes(o)||e.reason?.toLowerCase().includes(o))}return r}),M=r=>u.value.filter(o=>{const e=new Date(o.report_day),l=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0");return`${l}-${i}`===r}).length,D=r=>{if(!r)return"";const[o,e]=r.split("-");return new Date(o,parseInt(e)-1).toLocaleDateString("en-US",{month:"short",year:"numeric"})},x=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",C=()=>{window.location.href="/team-leader/dashboard"},L=()=>{p.value="",d.value=""};return $(()=>{if(!localStorage.getItem("tl_auth_token")){window.location.href="/";return}S()}),(r,o)=>(n(),a("div",V,[t("div",A,[t("div",{class:"mb-8"},[t("button",{onClick:C,class:"mb-4 text-gray-600 hover:text-gray-800 flex items-center gap-2 transition"},[...o[3]||(o[3]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),b(" Back to Dashboard ",-1)])]),o[4]||(o[4]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h1",{class:"text-3xl font-black bg-clip-text text-transparent bg-gradient-to-r from-gray-600 via-slate-600 to-gray-700"}," Resign Staff "),t("p",{class:"text-sm text-gray-600 mt-1"}," Staff members who have resigned ")])],-1))]),t("div",z,[o[6]||(o[6]=t("div",{class:"flex items-center gap-2 mb-3"},[t("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),t("span",{class:"text-sm font-medium text-gray-700"},"Filter by Month:")],-1)),t("div",N,[t("button",{onClick:o[0]||(o[0]=e=>d.value=""),class:y(["px-4 py-2 text-sm font-medium rounded-lg transition",d.value===""?"bg-gray-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[o[5]||(o[5]=b(" All Months ",-1)),t("span",P,"("+s(u.value.length)+")",1)],2),(n(!0),a(h,null,v(k.value,e=>(n(),a("button",{key:e,onClick:l=>d.value=e,class:y(["px-4 py-2 text-sm font-medium rounded-lg transition",d.value===e?"bg-slate-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[b(s(D(e))+" ",1),t("span",U,"("+s(M(e))+")",1)],10,T))),128))])]),t("div",Y,[t("div",E,[j(t("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>p.value=e),type:"text",placeholder:"Search by name, staff ID, or phone...",class:"flex-1 px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:border-gray-500 focus:ring-2 focus:ring-gray-200 transition"},null,512),[[R,p.value]]),t("button",{onClick:L,class:"px-3 py-2 text-sm bg-gray-100 border border-gray-300 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition flex items-center justify-center",title:"Reset search"},[...o[7]||(o[7]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),f.value?(n(),a("div",H,[...o[8]||(o[8]=[t("div",{class:"inline-block w-12 h-12 border-4 border-gray-200 border-t-gray-600 rounded-full animate-spin"},null,-1),t("p",{class:"text-gray-600 mt-4"},"Loading resign staff data...",-1)])])):c.value?(n(),a("div",W,[o[9]||(o[9]=t("svg",{class:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",q,s(c.value),1),t("button",{onClick:o[2]||(o[2]=(...e)=>r.loadStaff&&r.loadStaff(...e)),class:"mt-4 px-4 py-2 bg-red-100 text-red-700 border border-red-300 rounded-lg hover:bg-red-200 transition"}," Retry ")])):m.value.length>0?(n(),a("div",G,[t("div",Q,[t("table",J,[o[10]||(o[10]=t("thead",{class:"bg-gradient-to-r from-gray-50 to-slate-50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Report Day "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," ID Staff "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Name Staff "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Position "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Superior "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Last Working Day "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Type "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-gray-700 uppercase tracking-wider"}," Reason ")])],-1)),t("tbody",null,[(n(!0),a(h,null,v(m.value,e=>(n(),a("tr",{key:e.id,class:"hover:bg-gray-50/50 transition border-t border-gray-200"},[t("td",K,s(x(e.report_day)),1),t("td",O,s(e.staff_id),1),t("td",X,s(e.staff_name),1),t("td",Z,s(e.staff_position||"-"),1),t("td",tt,s(e.staff_superior||"-"),1),t("td",et,s(x(e.last_working_day)),1),t("td",ot,[t("span",{class:y(["px-2 py-1 text-xs font-medium rounded-full",e.resignation_type==="voluntary"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-orange-100 text-orange-700 border border-orange-300"])},s(e.resignation_type==="voluntary"?"Voluntary":"Involuntary"),3)]),t("td",{class:"px-3 py-2 max-w-xs truncate",title:e.reason},s(e.reason),9,rt)]))),128))])])]),t("div",st,[(n(!0),a(h,null,v(m.value,e=>(n(),a("div",{key:e.id,class:"p-4 hover:bg-gray-50/50 transition"},[t("div",at,[t("div",nt,[t("h3",lt,s(e.staff_name),1),t("p",dt,s(e.staff_id),1)]),t("span",{class:y(["px-2 py-1 text-xs font-medium rounded-full",e.resignation_type==="voluntary"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-orange-100 text-orange-700 border border-orange-300"])},s(e.resignation_type==="voluntary"?"Voluntary":"Involuntary"),3)]),t("div",it,[t("div",null,[o[11]||(o[11]=t("p",{class:"text-gray-500"},"Report Day",-1)),t("p",ut,s(x(e.report_day)),1)]),t("div",null,[o[12]||(o[12]=t("p",{class:"text-gray-500"},"Last Working Day",-1)),t("p",ct,s(x(e.last_working_day)),1)]),t("div",null,[o[13]||(o[13]=t("p",{class:"text-gray-500"},"Position",-1)),t("p",pt,s(e.staff_position||"-"),1)]),t("div",null,[o[14]||(o[14]=t("p",{class:"text-gray-500"},"Superior",-1)),t("p",gt,s(e.staff_superior||"-"),1)]),t("div",xt,[o[15]||(o[15]=t("p",{class:"text-gray-500"},"Reason",-1)),t("p",yt,s(e.reason),1)])])]))),128))])])):(n(),a("div",ft,[...o[16]||(o[16]=[t("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),t("p",{class:"text-gray-600 text-lg"}," No resignation records found ",-1)])]))])]))}};F(mt).mount("#app");
