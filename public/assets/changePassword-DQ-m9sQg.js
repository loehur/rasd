import{r as l,j as _,c as u,o as i,a as s,d as b,g as h,t as c,w as x,e as p,v as m,h as k}from"./tailwind-Bes4KR6F.js";import{A as y}from"./api-n_PshMHp.js";const P={class:"min-h-screen bg-slate-950 text-slate-100"},C={class:"p-4 sm:p-6 lg:p-8"},N={class:"max-w-2xl mx-auto"},B={key:0,class:"mb-6 p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-xl text-emerald-400"},S={key:1,class:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400"},M={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl p-6"},T={class:"mb-4"},U={class:"mb-4"},V={class:"mb-4"},A=["disabled"],E={__name:"ChangePasswordPage",setup(j){const w=l({name:"",phone_number:"",role:""}),v=l(!1),n=l(""),r=l(""),d=l(!1),o=l({current_password:"",new_password:"",confirm_password:""});_(()=>{const a=localStorage.getItem("auth_token"),e=localStorage.getItem("user");if(!a||!e){window.location.href="/admin";return}w.value=JSON.parse(e),document.addEventListener("click",t=>{t.target.closest(".relative")||(v.value=!1)})});const f=async()=>{if(n.value="",r.value="",o.value.new_password!==o.value.confirm_password){r.value="New passwords do not match";return}d.value=!0;try{const a=await fetch(`${y}/api/account/password`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:o.value.current_password,new_password:o.value.new_password,phone_number:w.value.phone_number})}),e=await a.json();a.ok&&e.success?(n.value="Password changed successfully!",o.value={current_password:"",new_password:"",confirm_password:""},setTimeout(()=>{n.value=""},3e3)):r.value=e.message||"Failed to change password"}catch(a){console.error("Change password error:",a),r.value="An error occurred: "+a.message}finally{d.value=!1}},g=()=>{window.location.href="/admin/dashboard"};return(a,e)=>(i(),u("div",P,[s("main",C,[s("div",N,[s("div",{class:"mb-6"},[s("button",{onClick:g,class:"text-slate-400 hover:text-slate-200 flex items-center gap-2 transition"},[...e[3]||(e[3]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),h(" Back to Dashboard ",-1)])])]),n.value?(i(),u("div",B,c(n.value),1)):b("",!0),r.value?(i(),u("div",S,c(r.value),1)):b("",!0),s("div",M,[s("form",{onSubmit:x(f,["prevent"])},[s("div",T,[e[4]||(e[4]=s("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Current Password ",-1)),p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.current_password=t),type:"password",required:"",class:"w-full px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition",placeholder:"Enter current password"},null,512),[[m,o.value.current_password]])]),s("div",U,[e[5]||(e[5]=s("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," New Password ",-1)),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.new_password=t),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition",placeholder:"Enter new password (min 6 characters)"},null,512),[[m,o.value.new_password]])]),s("div",V,[e[6]||(e[6]=s("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Confirm New Password ",-1)),p(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.confirm_password=t),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition",placeholder:"Confirm new password"},null,512),[[m,o.value.confirm_password]])]),s("button",{type:"submit",disabled:d.value,class:"w-full px-4 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:bg-slate-700 text-white font-medium rounded-lg transition"},c(d.value?"Updating...":"Change Password"),9,A)],32)])])])]))}};k(E).mount("#app");
