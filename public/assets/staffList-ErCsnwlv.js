import{r as u,i as c,j as dt,c as r,o as n,a as t,p as pt,d as D,n as g,g as X,t as o,F as x,l as f,e as ct,v as ut,w as xt,h as mt}from"./tailwind-jsiQPNE-.js";import{A as R}from"./api-n_PshMHp.js";import{_ as bt}from"./AdminHeader-u0XL8aj-.js";import{adminGetAttendancesByMonth as vt}from"./api-Cer3rv52.js";const ft={class:"min-h-screen bg-slate-950 text-slate-100 p-6"},_t={class:"max-w-7xl mx-auto"},ht={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-xl p-4 mb-4"},yt={class:"flex flex-wrap gap-2"},gt={class:"ml-1 text-xs opacity-70"},kt=["onClick"],wt={class:"ml-1 text-xs opacity-70"},St={class:"mt-3 flex flex-wrap gap-2"},Ct={class:"mt-3 flex items-center gap-2"},Lt={key:0,class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-xl p-4 mb-4"},jt={key:0,class:"text-center py-6"},Dt={key:1},At={key:0,class:"overflow-x-auto"},Mt={class:"w-full text-xs"},Bt={class:"divide-y divide-slate-800/50"},It={class:"px-3 py-2 whitespace-nowrap"},$t={class:"text-sm font-mono text-blue-400"},Tt={class:"px-3 py-2"},Pt={class:"flex items-center gap-3"},Nt={class:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white font-bold text-[11px]"},Et={class:"text-xs font-semibold text-slate-100"},Ot={class:"px-3 py-2"},Vt={class:"text-xs text-slate-300"},Rt={class:"px-3 py-2"},Ft={class:"px-2 py-1 text-[10px] font-medium rounded-full bg-purple-500/20 text-purple-300 border border-purple-500/30"},Gt={class:"px-3 py-2"},zt={class:"text-xs text-slate-400"},Ht={class:"px-3 py-2"},Wt={class:"text-xs text-slate-400"},qt={class:"px-3 py-2"},Qt={class:"text-xs text-slate-400"},Ut={class:"px-3 py-2"},Jt={class:"text-xs font-semibold text-emerald-300"},Kt={key:1,class:"overflow-x-auto"},Xt={class:"min-w-full text-xs"},Yt={class:"px-3 py-2"},Zt={class:"px-3 py-2 font-mono text-blue-400"},te={class:"px-3 py-2"},ee={class:"px-3 py-2"},se={class:"px-3 py-2"},le={class:"px-3 py-2"},oe={class:"px-3 py-2"},ae={class:"px-3 py-2"},re={class:"px-3 py-2"},ne={class:"px-3 py-2"},ie={class:"px-3 py-2"},de={key:2,class:"overflow-x-auto"},pe={class:"min-w-full text-xs"},ce={class:"py-2 px-3"},ue={class:"font-medium text-slate-100"},xe={class:"text-xs text-slate-400"},me={class:"py-2"},be={class:"py-2"},ve={class:"py-2"},fe={class:"py-2"},_e={class:"py-2"},he={class:"py-2"},ye={key:3,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ge={class:"overflow-x-auto"},ke={class:"min-w-full text-xs"},we={class:"py-2 px-3"},Se={class:"py-2 px-3"},Ce={class:"overflow-x-auto"},Le={class:"min-w-full text-xs"},je={class:"py-2 px-3"},De={class:"py-2 px-3"},Ae={class:"py-2 px-3"},Me={key:1,class:"text-center py-12 bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl"},Be={key:2,class:"bg-red-500/10 border border-red-500/30 rounded-2xl p-6 text-center"},Ie={class:"text-red-300 font-semibold"},$e={key:3,class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl overflow-hidden"},Te={class:"hidden md:block overflow-x-auto"},Pe={class:"w-full text-xs"},Ne={class:"bg-slate-800/70"},Ee={colspan:"12",class:"px-3 py-3 text-left font-bold text-emerald-400 text-sm"},Oe={class:"px-3 py-2 text-blue-300 font-semibold"},Ve={class:"px-3 py-2"},Re={class:"px-3 py-2"},Fe={class:"px-3 py-2 text-blue-400 font-mono"},Ge={class:"px-3 py-2"},ze={class:"px-3 py-2"},He={class:"px-3 py-2"},We={class:"px-3 py-2"},qe={class:"px-3 py-2"},Qe={class:"px-3 py-2"},Ue={class:"px-3 py-2"},Je={class:"px-3 py-2"},Ke={class:"md:hidden"},Xe={class:"bg-slate-800/70 px-4 py-3 border-t border-slate-800/50"},Ye={class:"font-bold text-emerald-400 text-sm"},Ze={class:"text-xs text-slate-400 mt-1"},ts={class:"divide-y divide-slate-800/50"},es=["onClick"],ss={class:"flex items-start gap-3 mb-3"},ls={class:"flex items-center gap-2"},os={class:"text-blue-300 font-bold text-sm"},as={class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0"},rs={class:"flex-1 min-w-0"},ns={class:"text-sm font-semibold text-slate-100 truncate"},is={class:"text-xs text-slate-400 truncate"},ds={class:"text-xs font-mono text-blue-400 mt-1"},ps={key:0,class:"px-2 py-1 text-xs font-medium rounded-full bg-red-500/20 text-red-300 border border-red-500/30"},cs={key:1,class:"px-2 py-1 text-xs font-medium rounded-full bg-orange-500/20 text-orange-300 border border-orange-500/30"},us={key:2,class:"px-2 py-1 text-xs font-medium rounded-full bg-emerald-500/20 text-emerald-300 border border-emerald-500/30"},xs={class:"grid grid-cols-2 gap-2 text-xs"},ms={class:"text-slate-300 font-medium truncate"},bs={class:"text-slate-300 font-medium truncate"},vs={key:4,class:"text-center py-12 bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl"},fs={class:"flex items-start justify-between mb-6"},_s={class:"flex items-center gap-4"},hs={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white text-2xl font-bold"},ys={class:"text-2xl font-bold text-slate-100"},gs={class:"text-slate-400"},ks={class:"grid grid-cols-2 gap-4"},ws={class:"text-sm text-slate-100 font-mono"},Ss={class:"text-sm text-slate-100"},Cs={class:"text-sm text-slate-100"},Ls={class:"text-sm text-slate-100"},js={class:"text-sm text-slate-100"},Ds={class:"text-sm text-slate-100"},As={class:"text-sm text-slate-100"},Ms={class:"text-sm text-slate-100"},Bs={class:"text-sm text-slate-100"},Is={class:"text-sm text-slate-100"},$s={class:"text-sm text-slate-100"},Ts={class:"text-sm text-slate-100"},Ps={class:"text-sm text-slate-100"},Ns={key:0,class:"col-span-2"},Es={class:"text-sm text-slate-100"},Os={__name:"StaffList",setup(Vs){const k=u([]),Y=u({role:""}),$=u(!1),w=u(""),m=u(""),F=u(""),G=u(""),S=u(""),T=u(1),P=u(5),p=u(null),b=u(""),h=u(!1),C=u([]),L=u([]),z=u(`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}`),j=["M2","B2","B1","A2","A1-3","A1-2","A1-1","P","P-1"],H=async()=>{$.value=!0,w.value="";try{const e=await(await fetch(`${R}/api/staff`,{method:"GET",headers:{Accept:"application/json"}})).json();e.success?k.value=e.data:w.value="Failed to load staff data"}catch(l){w.value="Connection error. Please make sure the server is running.",console.error("Load error:",l)}finally{$.value=!1}},_=c(()=>k.value.filter(l=>(l.staff_status||"active").toLowerCase()==="active"&&(l.role||"").toLowerCase()!=="tl")),A=c(()=>{let l=_.value;if(S.value&&(l=l.filter(e=>e.group===S.value)),m.value){const e=(m.value||"").toLowerCase();l=l.filter(s=>a(s.name,e)||a(s.staff_id,e)||a(s.phone_number,e)||a(s.area,e)||a(s.work_location,e)||a(s.position,e)||a(I(s),e)||a(s.department,e)||a(s.hire_date,e)||a(s.rank,e)||a(s.device,e)||(s.warning_letter||!1)&&a("wl",e)||(s.ojk_case||0)>0&&a("ojk",e))}return F.value&&(l=l.filter(e=>e.department===F.value)),G.value&&(l=l.filter(e=>e.position===G.value)),l}),N=c(()=>{const l={};return A.value.forEach(e=>{const s=I(e)||"No Team Leader";l[s]||(l[s]=[]),l[s].push(e)}),l});c(()=>[...new Set(k.value.map(l=>l.department))].filter(Boolean)),c(()=>[...new Set(k.value.map(l=>l.position))].filter(Boolean));const Z=c(()=>{const l={};return k.value.forEach(e=>{l[e.staff_id]=e.name}),l});c(()=>Object.entries(N.value).map(([e,s])=>({name:e,count:s.length})).sort((e,s)=>s.count-e.count));const W=c(()=>{const l={};_.value.forEach(s=>{const d=s.group||"-";l[d]=(l[d]||0)+1});const e=[];return j.forEach(s=>{l[s]&&e.push({group:s,count:l[s]})}),Object.keys(l).filter(s=>!j.includes(s)).sort().forEach(s=>e.push({group:s,count:l[s]})),e}),q=c(()=>{const l={};return _.value.forEach(e=>{const s=e.work_location||"-";l[s]=(l[s]||0)+1}),Object.keys(l).sort().map(e=>({location:e,count:l[e]}))}),Q=c(()=>{const l={};return _.value.forEach(e=>{const s=e.area||"-",d=e.work_location||"-",i=`${s}-${d}`;l[i]=(l[i]||0)+1}),Object.keys(l).sort().map(e=>({label:e,count:l[e]}))}),y=u([]),tt=c(()=>{const l={};return _.value.forEach(e=>{const s=e.team_leader_id;s&&(l[s]=(l[s]||0)+1)}),l}),a=(l,e)=>String(l||"").toLowerCase().includes(e),et=c(()=>{const l=(m.value||"").toLowerCase();return(l?y.value.filter(s=>a(s.name,l)||a(s.staff_id,l)||a(s.position,l)||a(s.group,l)||a(s.department,l)||a(s.area,l)||a(s.hire_date,l)):y.value.slice()).sort((s,d)=>{const i=j.indexOf(s.group||""),v=j.indexOf(d.group||""),V=i===-1?999:i,K=v===-1?999:v;return V!==K?V-K:String(s.group||"").localeCompare(String(d.group||""))})}),st=c(()=>{const l=(m.value||"").toLowerCase();return l?C.value.filter(e=>a(e.staff_name,l)||a(e.staff_id,l)||a(e.staff_position,l)||a(e.staff_superior,l)||a(e.department,l)||a(e.rank,l)||a(e.device,l)||a(e.work_location,l)||a(e.group,l)||a(e.hire_date,l)||a(e.report_day,l)||a(e.last_working_day,l)):C.value}),lt=c(()=>{const l=(m.value||"").toLowerCase();return l?L.value.filter(e=>a(e.name,l)||a(e.staff_id,l)||a(e.position,l)||a(e.department,l)||a(e.work_status,l)||a(e.device,l)||a(e.status_code,l)||a(e.report_day,l)):L.value}),ot=c(()=>{const l=(m.value||"").toLowerCase();return l?W.value.filter(e=>a(e.group,l)):W.value});c(()=>{const l=(m.value||"").toLowerCase();return l?q.value.filter(e=>a(e.location,l)):q.value});const at=c(()=>{const l=(m.value||"").toLowerCase();return l?Q.value.filter(e=>a(e.label,l)):Q.value}),M=l=>["px-4 py-2 text-sm font-medium rounded-lg transition",b.value===l?"bg-blue-600/30 text-blue-300 border border-blue-500/50":"bg-slate-800/50 text-slate-400 border border-slate-700 hover:bg-slate-700/50 hover:text-slate-200"],E=l=>l?new Date(l).toLocaleDateString():"-",B=async l=>{if(b.value=l,l==="attendance"){if(!L.value.length){h.value=!0;try{const e=await vt(z.value,1e3);L.value=e.success?e.data||[]:[]}catch{L.value=[]}finally{h.value=!1}}}else if(l==="resignation"){if(!C.value.length){h.value=!0;try{const e=localStorage.getItem("auth_token"),s=JSON.parse(localStorage.getItem("user")||"{}").role,d=new URLSearchParams;d.set("month",z.value);const v=await(await fetch(`${R}/api/resignations?${d.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json","X-Role":s}})).json();C.value=v&&v.success?v.data||[]:[]}catch{C.value=[]}finally{h.value=!1}}}else if(l==="tl"&&!y.value.length){h.value=!0;try{const e=localStorage.getItem("auth_token"),d=await(await fetch(`${R}/api/team-leaders`,{headers:{Authorization:`Bearer ${e}`}})).json();d&&d.success&&Array.isArray(d.data)?y.value=d.data:Array.isArray(d)?y.value=d:y.value=[]}catch{y.value=[]}finally{h.value=!1}}},I=l=>{const e=l?.team_leader_id||"";return e&&Z.value[e]||"-"};c(()=>k.value.reduce((l,e)=>l+(e.ojk_case||0),0));const rt=c(()=>Math.ceil(A.value.length/P.value));c(()=>{const l=(T.value-1)*P.value,e=l+P.value;return A.value.slice(l,e)}),c(()=>{const l=[];let s=Math.max(1,T.value-Math.floor(2.5)),d=Math.min(rt.value,s+5-1);d-s<4&&(s=Math.max(1,d-5+1));for(let i=s;i<=d;i++)l.push(i);return l});const O=l=>l.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2),nt=l=>_.value.filter(e=>e.group===l).length,it=l=>{p.value=l},U=()=>{window.location.href="/admin/import-staff"},J=l=>{S.value=l,b.value=null,T.value=1};return dt(()=>{const l=localStorage.getItem("user");if(!l){window.location.href="/admin";return}Y.value=JSON.parse(l),H()}),(l,e)=>(n(),r("div",ft,[t("div",_t,[pt(bt,{title:"Staff List",subtitle:"Admin Portal"}),t("div",ht,[e[13]||(e[13]=t("div",{class:"flex items-center gap-2 mb-3"},[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),t("span",{class:"text-sm font-medium text-slate-300"},"Filter")],-1)),t("div",yt,[t("button",{onClick:e[0]||(e[0]=s=>J("")),class:g(["px-4 py-2 text-sm font-medium rounded-lg transition",S.value===""?"bg-blue-600/30 text-blue-300 border border-blue-500/50":"bg-slate-800/50 text-slate-400 border border-slate-700 hover:bg-slate-700/50 hover:text-slate-200"])},[e[10]||(e[10]=X(" All ",-1)),t("span",gt,"("+o(_.value.length)+")",1)],2),(n(),r(x,null,f(j,s=>t("button",{key:s,onClick:d=>J(s),class:g(["px-4 py-2 text-sm font-medium rounded-lg transition",S.value===s?"bg-emerald-600/30 text-emerald-300 border border-emerald-500/50":"bg-slate-800/50 text-slate-400 border border-slate-700 hover:bg-slate-700/50 hover:text-slate-200"])},[X(o(s)+" ",1),t("span",wt,"("+o(nt(s))+")",1)],10,kt)),64))]),t("div",St,[t("button",{onClick:e[1]||(e[1]=s=>B("tl")),class:g(M("tl"))}," TL ",2),t("button",{onClick:e[2]||(e[2]=s=>B("resignation")),class:g(M("resignation"))}," Resignation ",2),t("button",{onClick:e[3]||(e[3]=s=>B("attendance")),class:g(M("attendance"))}," Attendance ",2),t("button",{onClick:e[4]||(e[4]=s=>B("summary")),class:g(M("summary"))}," Summary ",2)]),t("div",Ct,[ct(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>m.value=s),type:"text",placeholder:"Search...",class:"flex-1 px-3 py-2 text-sm bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition"},null,512),[[ut,m.value]]),t("button",{onClick:e[6]||(e[6]=s=>m.value=""),class:"px-3 py-2 text-sm bg-slate-800/50 border border-slate-700 rounded-lg text-slate-400 hover:text-slate-200 hover:border-slate-600 transition flex items-center justify-center",title:"Clear search"},[...e[11]||(e[11]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t("button",{onClick:U,class:"p-2 bg-blue-600/20 text-blue-400 border border-blue-600/30 rounded-lg hover:bg-blue-600/30 transition flex items-center justify-center",title:"Import staff"},[...e[12]||(e[12]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)])])])]),b.value?(n(),r("div",Lt,[h.value?(n(),r("div",jt,[...e[14]||(e[14]=[t("div",{class:"inline-block w-10 h-10 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"},null,-1)])])):(n(),r("div",Dt,[b.value==="tl"?(n(),r("div",At,[t("table",Mt,[e[15]||(e[15]=t("thead",{class:"bg-slate-800/50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Employee ID "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Name "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Position "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Group "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Department "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Area "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Hire Date "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Team Qty ")])],-1)),t("tbody",Bt,[(n(!0),r(x,null,f(et.value,s=>(n(),r("tr",{key:s.id,class:"hover:bg-slate-800/30 transition"},[t("td",It,[t("span",$t,o(s.staff_id),1)]),t("td",Tt,[t("div",Pt,[t("div",Nt,o(O(s.name)),1),t("div",null,[t("p",Et,o(s.name),1)])])]),t("td",Ot,[t("span",Vt,o(s.position),1)]),t("td",Rt,[t("span",Ft,o(s.group||"-"),1)]),t("td",Gt,[t("span",zt,o(s.department),1)]),t("td",Ht,[t("span",Wt,o(s.area),1)]),t("td",qt,[t("span",Qt,o(s.hire_date),1)]),t("td",Ut,[t("span",Jt,o(tt.value[s.staff_id]||0),1)])]))),128))])])])):b.value==="resignation"?(n(),r("div",Kt,[t("table",Xt,[e[16]||(e[16]=t("thead",{class:"bg-slate-800/50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Report Day "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," ID Staff "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Name Staff "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Position "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Superior "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Department "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Hiredate "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Rank "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Device "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," WFH/Oniste "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Group ")])],-1)),t("tbody",null,[(n(!0),r(x,null,f(st.value,s=>(n(),r("tr",{key:s.id,class:"hover:bg-slate-800/30 transition border-t border-slate-800/50"},[t("td",Yt,o(E(s.report_day||s.last_working_day)),1),t("td",Zt,o(s.staff_id),1),t("td",te,o(s.staff_name),1),t("td",ee,o(s.staff_position||"-"),1),t("td",se,o(s.staff_superior||"-"),1),t("td",le,o(s.department||"-"),1),t("td",oe,o(s.hire_date?E(s.hire_date):"-"),1),t("td",ae,o(s.rank||"-"),1),t("td",re,o(s.device||"-"),1),t("td",ne,o(s.work_location||"-"),1),t("td",ie,o(s.group||"-"),1)]))),128))])])])):b.value==="attendance"?(n(),r("div",de,[t("table",pe,[e[17]||(e[17]=t("thead",null,[t("tr",{class:"text-left text-slate-300 border-b border-slate-800"},[t("th",{class:"py-2 px-3"},"Employee"),t("th",{class:"py-2 px-3"},"Position"),t("th",{class:"py-2 px-3"},"Department"),t("th",{class:"py-2 px-3"},"WFH/Onsite"),t("th",{class:"py-2 px-3"},"Device"),t("th",{class:"py-2 px-3"},"Report Day"),t("th",{class:"py-2 px-3"},"Status")])],-1)),t("tbody",null,[(n(!0),r(x,null,f(lt.value,s=>(n(),r("tr",{key:s.id,class:"border-b border-slate-800"},[t("td",ce,[t("div",ue,o(s.name),1),t("div",xe,o(s.staff_id),1)]),t("td",me,o(s.position),1),t("td",be,o(s.department),1),t("td",ve,o(s.work_status),1),t("td",fe,o(s.device),1),t("td",_e,o(E(s.report_day)),1),t("td",he,o(s.status_code),1)]))),128))])])])):b.value==="summary"?(n(),r("div",ye,[t("div",ge,[t("table",ke,[e[18]||(e[18]=t("thead",null,[t("tr",{class:"text-left text-slate-300 border-b border-slate-800"},[t("th",{class:"py-2 px-3"},"Team"),t("th",{class:"py-2 px-3"},"Team Quantity")])],-1)),t("tbody",null,[(n(!0),r(x,null,f(ot.value,s=>(n(),r("tr",{key:s.group,class:"border-b border-slate-800"},[t("td",we,o(s.group),1),t("td",Se,o(s.count),1)]))),128))])])]),t("div",Ce,[t("table",Le,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"text-left text-slate-300 border-b border-slate-800"},[t("th",{class:"py-2 px-3"},"Area-Location"),t("th",{class:"py-2 px-3"},"Team Quantity")])],-1)),t("tbody",null,[t("tr",null,[e[19]||(e[19]=t("td",{class:"py-2 px-3"},"Total",-1)),t("td",je,o(_.value.length),1)]),(n(!0),r(x,null,f(at.value,s=>(n(),r("tr",{key:s.label,class:"border-b border-slate-800"},[t("td",De,o(s.label),1),t("td",Ae,o(s.count),1)]))),128))])])])])):D("",!0)]))])):D("",!0),$.value?(n(),r("div",Me,[...e[21]||(e[21]=[t("div",{class:"inline-block w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"},null,-1),t("p",{class:"text-slate-400 mt-4"},"Loading staff data...",-1)])])):w.value?(n(),r("div",Be,[e[22]||(e[22]=t("svg",{class:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",Ie,o(w.value),1),t("button",{onClick:H,class:"mt-4 px-4 py-2 bg-red-600/20 text-red-400 border border-red-600/30 rounded-lg hover:bg-red-600/30 transition"}," Retry ")])):!b.value&&A.value.length>0?(n(),r("div",$e,[t("div",Te,[t("table",Pe,[e[23]||(e[23]=t("thead",{class:"bg-slate-800/50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," SN "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Area "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," WFH/Onsite "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," ID Staff "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Name Staff "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Position "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Superior "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Department "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Hiredate "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Rank "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Device "),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," WL ")])],-1)),t("tbody",null,[(n(!0),r(x,null,f(N.value,(s,d)=>(n(),r(x,{key:d},[t("tr",Ne,[t("td",Ee," Team Leader: "+o(d)+" ("+o(s.length)+" staff) ",1)]),(n(!0),r(x,null,f(s,(i,v)=>(n(),r("tr",{key:i.id,class:"hover:bg-slate-800/30 transition border-t border-slate-800/50"},[t("td",Oe,o(v+1),1),t("td",Ve,o(i.area||"-"),1),t("td",Re,o(i.work_location||"-"),1),t("td",Fe,o(i.staff_id),1),t("td",Ge,o(i.name),1),t("td",ze,o(i.position||"-"),1),t("td",He,o(I(i)),1),t("td",We,o(i.department||"-"),1),t("td",qe,o(i.hire_date),1),t("td",Qe,o(i.rank||"-"),1),t("td",Ue,o(i.device||"-"),1),t("td",Je,o(i.warning_letter?"WL":"-"),1)]))),128))],64))),128))])])]),t("div",Ke,[(n(!0),r(x,null,f(N.value,(s,d)=>(n(),r(x,{key:d},[t("div",Xe,[t("h3",Ye," Team Leader: "+o(d),1),t("p",Ze,o(s.length)+" staff members ",1)]),t("div",ts,[(n(!0),r(x,null,f(s,(i,v)=>(n(),r("div",{key:i.id,onClick:V=>it(i),class:"p-4 hover:bg-slate-800/30 transition cursor-pointer"},[t("div",ss,[t("div",ls,[t("span",os,o(v+1)+".",1),t("div",as,o(O(i.name)),1)]),t("div",rs,[t("h3",ns,o(i.name),1),t("p",is,o(i.position),1),t("p",ds,o(i.staff_id),1)]),t("div",null,[i.ojk_case>0?(n(),r("span",ps," OJK ")):i.warning_letter?(n(),r("span",cs," Warning ")):(n(),r("span",us," Active "))])]),t("div",xs,[t("div",null,[e[24]||(e[24]=t("p",{class:"text-slate-500"},"Department",-1)),t("p",ms,o(i.department),1)]),t("div",null,[e[25]||(e[25]=t("p",{class:"text-slate-500"},"Phone",-1)),t("p",bs,o(i.phone_number),1)])])],8,es))),128))])],64))),128))])])):b.value?D("",!0):(n(),r("div",vs,[e[26]||(e[26]=t("svg",{class:"w-16 h-16 text-slate-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),e[27]||(e[27]=t("p",{class:"text-slate-400 text-lg"},"No staff found",-1)),t("button",{onClick:U,class:"mt-4 px-6 py-3 bg-blue-600/20 text-blue-400 border border-blue-600/30 rounded-lg hover:bg-blue-600/30 transition"}," Import Staff Data ")])),p.value?(n(),r("div",{key:5,onClick:e[9]||(e[9]=s=>p.value=null),class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50"},[t("div",{onClick:e[8]||(e[8]=xt(()=>{},["stop"])),class:"bg-slate-900 border border-slate-800 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"},[t("div",fs,[t("div",_s,[t("div",hs,o(O(p.value.name)),1),t("div",null,[t("h2",ys,o(p.value.name),1),t("p",gs,o(p.value.position),1)])]),t("button",{onClick:e[7]||(e[7]=s=>p.value=null),class:"text-slate-400 hover:text-slate-200 transition"},[...e[28]||(e[28]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",ks,[t("div",null,[e[29]||(e[29]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Staff ID ",-1)),t("p",ws,o(p.value.staff_id),1)]),t("div",null,[e[30]||(e[30]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Department ",-1)),t("p",Ss,o(p.value.department),1)]),t("div",null,[e[31]||(e[31]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Phone Number ",-1)),t("p",Cs,o(p.value.phone_number),1)]),t("div",null,[e[32]||(e[32]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Email ",-1)),t("p",Ls,o(p.value.email||"-"),1)]),t("div",null,[e[33]||(e[33]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Superior ",-1)),t("p",js,o(I(p.value)),1)]),t("div",null,[e[34]||(e[34]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Group ",-1)),t("p",Ds,o(p.value.group||"-"),1)]),t("div",null,[e[35]||(e[35]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Area ",-1)),t("p",As,o(p.value.area||"-"),1)]),t("div",null,[e[36]||(e[36]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Work Location ",-1)),t("p",Ms,o(p.value.work_location||"-"),1)]),t("div",null,[e[37]||(e[37]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Hire Date ",-1)),t("p",Bs,o(p.value.hire_date),1)]),t("div",null,[e[38]||(e[38]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Rank ",-1)),t("p",Is,o(p.value.rank||"-"),1)]),t("div",null,[e[39]||(e[39]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Device ",-1)),t("p",$s,o(p.value.device||"-"),1)]),t("div",null,[e[40]||(e[40]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Team Leader ID ",-1)),t("p",Ts,o(p.value.team_leader_id||"-"),1)]),t("div",null,[e[41]||(e[41]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Warning Letter ",-1)),t("p",Ps,o(p.value.warning_letter||"-"),1)]),t("div",null,[e[42]||(e[42]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," OJK Case ",-1)),t("p",{class:g(["text-sm font-semibold",p.value.ojk_case>0?"text-red-400":"text-emerald-400"])},o(p.value.ojk_case),3)]),p.value.notes?(n(),r("div",Ns,[e[43]||(e[43]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Notes ",-1)),t("p",Es,o(p.value.notes),1)])):D("",!0)])])])):D("",!0)])]))}};mt(Os).mount("#app");
