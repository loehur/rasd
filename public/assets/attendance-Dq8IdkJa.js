import{r as c,j as b,c as l,o as n,a as e,d as g,g as v,e as f,v as w,F as k,l as D,t as o,n as x,h as A}from"./tailwind-XrDIfzaI.js";import{adminGetAttendancesByMonth as B,adminDeleteAttendance as C}from"./api-CrpQcQBv.js";import"./api-n_PshMHp.js";const F={class:"min-h-screen bg-slate-950 text-slate-100"},M={class:"px-3 sm:px-6 lg:px-8 py-4"},S={class:"max-w-6xl mx-auto space-y-6"},E={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl p-6"},T={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4"},V={class:"flex items-center gap-3"},j={key:0,class:"p-6 text-slate-300"},L={key:1},N={class:"overflow-x-auto -mx-3 sm:mx-0"},$={class:"min-w-full text-sm"},z={class:"py-2 px-3 sm:px-0"},H={class:"font-medium text-slate-100"},P={class:"text-xs text-slate-400"},R={class:"py-2"},W={class:"py-2"},G={class:"py-2"},O={class:"py-2"},U={class:"py-2"},Y={class:"py-2"},q={class:"py-2"},I=["onClick"],J={class:"text-white"},K={__name:"AttendancePage",setup(Q){const i=c(!1),u=c([]),p=c(`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,"0")}`),r=c({show:!1,message:"",type:"success"});b(async()=>{await m()});const m=async()=>{try{i.value=!0;const a=await B(p.value,1e3);a.success?u.value=a.data||[]:d(a.message||"Failed to load attendances","error")}catch{d("Error loading attendances","error")}finally{i.value=!1}},h=async a=>{try{const t=await C(a);t.success?(d("Attendance deleted"),await m()):d(t.message||"Delete failed","error")}catch{d("Error deleting attendance","error")}},_=a=>new Date(a).toLocaleDateString(),d=(a,t="success")=>{r.value={show:!0,message:a,type:t},setTimeout(()=>{r.value.show=!1},3e3)},y=()=>{window.location.href="/admin/dashboard"};return(a,t)=>(n(),l("div",F,[e("main",M,[e("div",S,[e("div",{class:"mb-4"},[e("button",{onClick:y,class:"text-slate-400 hover:text-slate-200 flex items-center gap-2 transition"},[...t[1]||(t[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),v(" Back to Dashboard ",-1)])])]),e("div",E,[e("div",T,[t[3]||(t[3]=e("h2",{class:"text-lg sm:text-xl font-bold"}," Attendance Records ",-1)),e("div",V,[t[2]||(t[2]=e("label",{class:"text-sm text-slate-300"},"Filter bulan:",-1)),f(e("input",{type:"month","onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),onChange:m,class:"px-3 py-2 bg-slate-800/50 border border-slate-700 rounded text-slate-100"},null,544),[[w,p.value]])])]),i.value?(n(),l("div",j," Loading... ")):(n(),l("div",L,[e("div",N,[e("table",$,[t[4]||(t[4]=e("thead",null,[e("tr",{class:"text-left text-slate-300 border-b border-slate-800"},[e("th",{class:"py-2 px-3 sm:px-0"}," Employee "),e("th",{class:"py-2"},"Position"),e("th",{class:"py-2"},"Department"),e("th",{class:"py-2"},"WFH/Onsite"),e("th",{class:"py-2"},"Device"),e("th",{class:"py-2"},"Report Day"),e("th",{class:"py-2"},"Status"),e("th",{class:"py-2"},"Actions")])],-1)),e("tbody",null,[(n(!0),l(k,null,D(u.value,s=>(n(),l("tr",{key:s.id,class:"border-b border-slate-800"},[e("td",z,[e("div",H,o(s.name),1),e("div",P,o(s.staff_id),1)]),e("td",R,o(s.position),1),e("td",W,o(s.department),1),e("td",G,[e("span",{class:x(["px-2 py-1 text-xs rounded-full border",s.work_status==="WFH"?"bg-blue-500/10 text-blue-300 border-blue-500/30":"bg-emerald-500/10 text-emerald-300 border-emerald-500/30"])},o(s.work_status),3)]),e("td",O,o(s.device),1),e("td",U,o(_(s.report_day)),1),e("td",Y,o(s.status_code),1),e("td",q,[e("button",{onClick:X=>h(s.id),class:"px-3 py-1 text-xs bg-red-600 hover:bg-red-700 rounded text-white"}," Delete ",8,I)])]))),128))])])])]))]),r.value.show?(n(),l("div",{key:0,class:x(["fixed top-4 left-1/2 -translate-x-1/2 sm:left-auto sm:translate-x-0 sm:right-4 px-4 sm:px-6 py-3 sm:py-4 rounded-lg shadow-lg z-50",r.value.type==="success"?"bg-green-600":"bg-red-600"])},[e("span",J,o(r.value.message),1)],2)):g("",!0)])])]))}};A(K).mount("#app");
