import{A as o}from"./api-n_PshMHp.js";async function p(){const e=localStorage.getItem("tl_auth_token");return await(await fetch(`${o}/api/team-leader/staff`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json()}async function l(e=1,t=null,n=15){const a=localStorage.getItem("tl_auth_token"),s=new URLSearchParams;return s.set("page",String(e)),t&&s.set("report_day",t),n&&s.set("per_page",String(n)),await(await fetch(`${o}/api/attendances?${s.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).json()}async function h(){const e=localStorage.getItem("tl_auth_token");return await(await fetch(`${o}/api/attendances/staff/team-leader`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json()}async function u(e){const t=localStorage.getItem("tl_auth_token");return await(await fetch(`${o}/api/attendances/staff/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).json()}async function d(e,t){const n=localStorage.getItem("tl_auth_token"),a=new FormData;Object.keys(e).forEach(r=>{e[r]!==null&&e[r]!==void 0&&a.append(r,e[r])}),t&&a.append("proof",t);const c=await(await fetch(`${o}/api/attendances`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:a})).text();try{return JSON.parse(c)}catch{return console.error("Attendance create response (non-JSON):",c),{success:!1,message:"Server error: unexpected response (not JSON)."}}}async function f(e=null,t=1e3){const n=localStorage.getItem("auth_token"),a=new URLSearchParams;return e&&a.set("report_day",e),t&&a.set("per_page",String(t)),await(await fetch(`${o}/api/attendances?${a.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).json()}async function m(e){const t=localStorage.getItem("auth_token"),n=JSON.parse(localStorage.getItem("user")||"{}").role;return await(await fetch(`${o}/api/attendances/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json","X-Role":n}})).json()}async function g(e){const t=localStorage.getItem("auth_token"),n=JSON.parse(localStorage.getItem("user")||"{}").role;return await(await fetch(`${o}/api/users/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"X-Role":n}})).json()}export{m as adminDeleteAttendance,f as adminGetAttendances,d as createAttendance,g as deleteUser,l as getAttendances,h as getStaffByTeamLeader,u as getStaffDetail,p as getTeamLeaderStaff};
