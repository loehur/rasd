import{r as l,j as h,c as i,o as m,p as g,a as t,d as p,t as c,w as x,e as b,v,h as y}from"./tailwind-bLs07C1A.js";import{A as w}from"./api-rG_fphBW.js";import{_ as k}from"./AdminHeader-Cixuwkw4.js";const N={class:"min-h-screen bg-slate-950 text-slate-100"},S={class:"p-4 sm:p-6 lg:p-8"},P={class:"max-w-2xl mx-auto"},A={key:0,class:"mb-6 p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-xl text-emerald-400"},U={key:1,class:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400"},E={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl p-6 mb-6"},M={class:"mb-4"},T={class:"mb-4"},V=["disabled"],B={__name:"AccountPage",setup(I){const o=l({name:"",phone_number:"",role:""}),f=l(!1),n=l(""),r=l(""),d=l(!1),a=l({name:"",phone_number:""});h(()=>{const s=localStorage.getItem("auth_token"),e=localStorage.getItem("user");if(!s||!e){window.location.href="/admin";return}o.value=JSON.parse(e),a.value.name=o.value.name,a.value.phone_number=o.value.phone_number,document.addEventListener("click",u=>{u.target.closest(".relative")||(f.value=!1)})});const _=async()=>{n.value="",r.value="",d.value=!0;try{const s=await fetch(`${w}/api/account/name`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.value.name,phone_number:o.value.phone_number,new_phone_number:a.value.phone_number})}),e=await s.json();s.ok&&e.success?(o.value.name=a.value.name,o.value.phone_number=a.value.phone_number,localStorage.setItem("user",JSON.stringify(o.value)),n.value="Profile updated successfully!",setTimeout(()=>{n.value=""},3e3)):r.value=e.message||"Failed to update name"}catch{r.value="An error occurred. Please try again."}finally{d.value=!1}};return(s,e)=>(m(),i("div",N,[g(k,{title:"Account Settings",subtitle:"Admin Portal"}),t("main",S,[t("div",P,[n.value?(m(),i("div",A,c(n.value),1)):p("",!0),r.value?(m(),i("div",U,c(r.value),1)):p("",!0),t("div",E,[e[4]||(e[4]=t("h2",{class:"text-xl font-bold text-slate-100 mb-4"}," Update Profile ",-1)),t("form",{onSubmit:x(_,["prevent"])},[t("div",M,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Full Name ",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.name=u),type:"text",required:"",class:"w-full px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition",placeholder:"Enter your name"},null,512),[[v,a.value.name]])]),t("div",T,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-slate-300 mb-2"}," Phone Number ",-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.phone_number=u),type:"text",required:"",class:"w-full px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition",placeholder:"Enter your phone number"},null,512),[[v,a.value.phone_number]])]),t("button",{type:"submit",disabled:d.value,class:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-700 text-white font-medium rounded-lg transition"},c(d.value?"Updating...":"Update Profile"),9,V)],32)])])])]))}};y(B).mount("#app");
