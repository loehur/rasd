import{r as c,i as w,j as C,c as l,o as n,a as e,p as L,d as M,e as j,v as A,g as T,t as o,F as g,l as _,w as B,h as D}from"./tailwind-jsiQPNE-.js";import{A as y}from"./api-n_PshMHp.js";import{_ as I}from"./AdminHeader-u0XL8aj-.js";const $={class:"min-h-screen bg-slate-950 text-slate-100 p-6"},P={class:"max-w-7xl mx-auto"},R={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-xl p-4 mb-4"},z={class:"flex gap-2"},N={key:0,class:"text-center py-12 bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl"},S={key:1,class:"bg-red-500/10 border border-red-500/30 rounded-2xl p-6 text-center"},V={class:"text-red-300 font-semibold"},E={key:2,class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl overflow-hidden"},F={class:"hidden md:block overflow-x-auto"},H={class:"w-full text-xs"},U={class:"divide-y divide-slate-800/50"},G={class:"px-3 py-2 whitespace-nowrap"},q={class:"text-sm font-mono text-blue-400"},O={class:"px-3 py-2"},Q={class:"flex items-center gap-3"},W={class:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white font-bold text-[11px]"},J={class:"text-xs font-semibold text-slate-100"},K={class:"px-3 py-2"},X={class:"text-xs text-slate-300"},Y={class:"px-3 py-2"},Z={class:"px-2 py-1 text-[10px] font-medium rounded-full bg-purple-500/20 text-purple-300 border border-purple-500/30"},ee={class:"px-3 py-2"},te={class:"text-xs text-slate-400"},se={class:"px-3 py-2"},oe={class:"text-xs text-slate-400"},re={class:"px-3 py-2"},ae={class:"text-xs text-slate-400"},le={class:"px-3 py-2"},ne=["onClick"],de={class:"md:hidden divide-y divide-slate-800/50"},ie={class:"flex items-start gap-3 mb-3"},pe={class:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white font-bold text-xs flex-shrink-0"},ce={class:"flex-1 min-w-0"},ue={class:"text-xs font-semibold text-slate-100 truncate"},xe={class:"text-xs text-slate-400 truncate"},me={class:"text-xs font-mono text-blue-400 mt-1"},be={class:"px-2 py-1 text-[10px] font-medium rounded-full bg-slate-800/30 text-slate-300 border border-slate-700"},fe={class:"grid grid-cols-2 gap-2 text-xs mb-3"},ve={class:"text-slate-300 font-medium truncate"},he={class:"text-slate-300 font-medium truncate"},ge=["onClick"],_e={key:3,class:"text-center py-12 bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl"},ye={class:"flex items-start justify-between mb-6"},ke={class:"flex items-center gap-4"},we={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white text-2xl font-bold"},Ce={class:"text-2xl font-bold text-slate-100"},Le={class:"text-slate-400"},Me={class:"grid grid-cols-2 gap-4"},je={class:"text-sm text-slate-100 font-mono"},Ae={class:"text-sm text-slate-100"},Te={class:"text-sm text-slate-100"},Be={class:"text-sm text-slate-100"},De={class:"text-sm text-slate-100"},Ie={__name:"TeamLeaderList",setup($e){const d=c([]),x=c(!1),u=c(""),i=c(""),a=c(null),m=w(()=>{if(!i.value)return d.value;const r=i.value.toLowerCase();return d.value.filter(t=>(t.name||"").toLowerCase().includes(r)||(t.staff_id||"").toLowerCase().includes(r)||(t.group||"").toLowerCase().includes(r))}),b=r=>r?r.split(" ").map(t=>t[0]||"").join("").toUpperCase().substring(0,2):"TL",k=()=>{i.value=""},f=async()=>{x.value=!0,u.value="";try{const r=localStorage.getItem("auth_token"),s=await(await fetch(`${y}/api/team-leaders`,{headers:{Authorization:`Bearer ${r}`}})).json();s.success&&Array.isArray(s.data)?d.value=s.data:Array.isArray(s)?d.value=s:d.value=[]}catch(r){u.value="Connection error. Please make sure the server is running.",console.error("Load error:",r),d.value=[]}finally{x.value=!1}};C(f);const v=()=>{window.location.href="/admin/import-team-leader"},h=async r=>{if(confirm(`Reset password for ${r.name} to default (tl1230)?`))try{const t=localStorage.getItem("auth_token"),p=await(await fetch(`${y}/api/team-leaders/${r.staff_id}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).json();p.success?alert(p.message):alert("Failed to reset password: "+p.message)}catch(t){console.error("Reset password error:",t),alert("Connection error. Please try again.")}};return(r,t)=>(n(),l("div",$,[e("div",P,[L(I,{title:"Team Leader",subtitle:"Admin Portal"}),e("div",R,[e("div",z,[j(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),type:"text",placeholder:"Search by name, employee ID, or group...",class:"flex-1 px-3 py-2 text-sm bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition"},null,512),[[A,i.value]]),e("button",{onClick:k,class:"px-3 py-2 text-sm bg-slate-800/50 border border-slate-700 rounded-lg text-slate-400 hover:text-slate-200 hover:border-slate-600 transition flex items-center justify-center",title:"Reset search"},[...t[4]||(t[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("button",{onClick:v,class:"px-4 py-2 text-sm bg-blue-600/20 text-blue-400 border border-blue-600/30 rounded-lg hover:bg-blue-600/30 transition flex items-center gap-2",title:"Import team leader"},[...t[5]||(t[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),T(" Import TL ",-1)])])])]),x.value?(n(),l("div",N,[...t[6]||(t[6]=[e("div",{class:"inline-block w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"},null,-1),e("p",{class:"text-slate-400 mt-4"},"Loading team leader data...",-1)])])):u.value?(n(),l("div",S,[t[7]||(t[7]=e("svg",{class:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",V,o(u.value),1),e("button",{onClick:f,class:"mt-4 px-4 py-2 bg-red-600/20 text-red-400 border border-red-600/30 rounded-lg hover:bg-red-600/30 transition"}," Retry ")])):m.value.length>0?(n(),l("div",E,[e("div",F,[e("table",H,[t[8]||(t[8]=e("thead",{class:"bg-slate-800/50"},[e("tr",null,[e("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Employee ID "),e("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Name "),e("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Position "),e("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Group "),e("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Department "),e("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Area "),e("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Hire Date "),e("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",U,[(n(!0),l(g,null,_(m.value,s=>(n(),l("tr",{key:s.id,class:"hover:bg-slate-800/30 transition"},[e("td",G,[e("span",q,o(s.staff_id),1)]),e("td",O,[e("div",Q,[e("div",W,o(b(s.name)),1),e("div",null,[e("p",J,o(s.name),1)])])]),e("td",K,[e("span",X,o(s.position),1)]),e("td",Y,[e("span",Z,o(s.group||"-"),1)]),e("td",ee,[e("span",te,o(s.department),1)]),e("td",se,[e("span",oe,o(s.area),1)]),e("td",re,[e("span",ae,o(s.hire_date),1)]),e("td",le,[e("button",{onClick:p=>h(s),class:"px-2 py-1 text-[10px] font-medium rounded-md bg-orange-500/20 text-orange-300 border border-orange-500/30 hover:bg-orange-500/30 transition",title:"Reset password to tl1230"}," Reset PW ",8,ne)])]))),128))])])]),e("div",de,[(n(!0),l(g,null,_(m.value,s=>(n(),l("div",{key:s.id,class:"p-3 hover:bg-slate-800/30 transition"},[e("div",ie,[e("div",pe,o(b(s.name)),1),e("div",ce,[e("h3",ue,o(s.name),1),e("p",xe,o(s.position),1),e("p",me,o(s.staff_id),1)]),e("div",null,[e("span",be,o(s.group||"-"),1)])]),e("div",fe,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-slate-500"},"Department",-1)),e("p",ve,o(s.department),1)]),e("div",null,[t[10]||(t[10]=e("p",{class:"text-slate-500"},"Area",-1)),e("p",he,o(s.area),1)])]),e("button",{onClick:p=>h(s),class:"w-full px-3 py-2 text-xs font-medium rounded-lg bg-orange-500/20 text-orange-300 border border-orange-500/30 hover:bg-orange-500/30 transition"}," Reset Password to tl1230 ",8,ge)]))),128))])])):(n(),l("div",_e,[t[11]||(t[11]=e("svg",{class:"w-16 h-16 text-slate-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t[12]||(t[12]=e("p",{class:"text-slate-400 text-lg"},"No team leaders found",-1)),e("button",{onClick:v,class:"mt-4 px-6 py-3 bg-blue-600/20 text-blue-400 border border-blue-600/30 rounded-lg hover:bg-blue-600/30 transition"}," Import Team Leader Data ")])),a.value?(n(),l("div",{key:4,onClick:t[3]||(t[3]=s=>a.value=null),class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50"},[e("div",{onClick:t[2]||(t[2]=B(()=>{},["stop"])),class:"bg-slate-900 border border-slate-800 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"},[e("div",ye,[e("div",ke,[e("div",we,o(b(a.value.name)),1),e("div",null,[e("h2",Ce,o(a.value.name),1),e("p",Le,o(a.value.position),1)])]),e("button",{onClick:t[1]||(t[1]=s=>a.value=null),class:"text-slate-400 hover:text-slate-200 transition"},[...t[13]||(t[13]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Me,[e("div",null,[t[14]||(t[14]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Employee ID ",-1)),e("p",je,o(a.value.staff_id),1)]),e("div",null,[t[15]||(t[15]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Group ",-1)),e("p",Ae,o(a.value.group||"-"),1)]),e("div",null,[t[16]||(t[16]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Department ",-1)),e("p",Te,o(a.value.department||"-"),1)]),e("div",null,[t[17]||(t[17]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Area ",-1)),e("p",Be,o(a.value.area||"-"),1)]),e("div",null,[t[18]||(t[18]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Hire Date ",-1)),e("p",De,o(a.value.hire_date||"-"),1)])])])])):M("",!0)])]))}};D(Ie).mount("#app");
