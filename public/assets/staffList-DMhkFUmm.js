import{r as d,i as c,j as G,c as r,o as n,a as e,d as L,g,n as h,t as l,F as _,k,e as F,v as T,w as W,h as E}from"./tailwind-D8AO71p9.js";import{A as R}from"./api-n_PshMHp.js";const J={class:"min-h-screen bg-slate-950 text-slate-100 p-6"},K={class:"max-w-7xl mx-auto"},O={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-xl p-4 mb-4"},U={class:"flex flex-wrap gap-2"},H={class:"ml-1 text-xs opacity-70"},q=["onClick"],Q={class:"ml-1 text-xs opacity-70"},X={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-xl p-4 mb-4"},Y={class:"flex gap-2"},Z={key:0,class:"text-center py-12 bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl"},ee={key:1,class:"bg-red-500/10 border border-red-500/30 rounded-2xl p-6 text-center"},te={class:"text-red-300 font-semibold"},se={key:2,class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl overflow-hidden"},le={class:"hidden md:block overflow-x-auto"},oe={class:"w-full"},ae={class:"divide-y divide-slate-800/50"},re={class:"px-6 py-4 whitespace-nowrap"},ne={class:"text-sm font-mono text-blue-400"},ie={class:"px-6 py-4"},de={class:"flex items-center gap-3"},ue={class:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white font-bold"},xe={class:"text-sm font-semibold text-slate-100"},pe={class:"text-xs text-slate-500"},ce={class:"px-6 py-4"},be={class:"text-sm text-slate-300"},me={class:"px-6 py-4"},ve={class:"px-3 py-1 text-xs font-medium rounded-full bg-purple-500/20 text-purple-300 border border-purple-500/30"},fe={class:"px-6 py-4"},ge={class:"text-sm text-slate-400"},he={class:"px-6 py-4"},_e={class:"text-sm text-slate-400"},ke={class:"px-6 py-4"},we={key:0,class:"px-3 py-1 text-xs font-medium rounded-full bg-red-500/20 text-red-300 border border-red-500/30"},ye={key:1,class:"px-3 py-1 text-xs font-medium rounded-full bg-orange-500/20 text-orange-300 border border-orange-500/30"},Ce={key:2,class:"px-3 py-1 text-xs font-medium rounded-full bg-emerald-500/20 text-emerald-300 border border-emerald-500/30"},je={class:"px-6 py-4"},Me=["onClick"],Be={class:"md:hidden divide-y divide-slate-800/50"},Le=["onClick"],Se={class:"flex items-start gap-3 mb-3"},Ae={class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0"},Pe={class:"flex-1 min-w-0"},De={class:"text-sm font-semibold text-slate-100 truncate"},Ve={class:"text-xs text-slate-400 truncate"},$e={class:"text-xs font-mono text-blue-400 mt-1"},Ie={key:0,class:"px-2 py-1 text-xs font-medium rounded-full bg-red-500/20 text-red-300 border border-red-500/30"},Ne={key:1,class:"px-2 py-1 text-xs font-medium rounded-full bg-orange-500/20 text-orange-300 border border-orange-500/30"},ze={key:2,class:"px-2 py-1 text-xs font-medium rounded-full bg-emerald-500/20 text-emerald-300 border border-emerald-500/30"},Ge={class:"grid grid-cols-2 gap-2 text-xs"},Fe={class:"text-slate-300 font-medium truncate"},Te={class:"text-slate-300 font-medium truncate"},We={key:0,class:"px-6 py-4 bg-slate-800/30 flex items-center justify-between"},Ee={class:"text-sm text-slate-400"},Re={class:"flex gap-2"},Je=["disabled"],Ke=["onClick"],Oe=["disabled"],Ue={key:3,class:"text-center py-12 bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl"},He={class:"flex items-start justify-between mb-6"},qe={class:"flex items-center gap-4"},Qe={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white text-2xl font-bold"},Xe={class:"text-2xl font-bold text-slate-100"},Ye={class:"text-slate-400"},Ze={class:"grid grid-cols-2 gap-4"},et={class:"text-sm text-slate-100 font-mono"},tt={class:"text-sm text-slate-100"},st={class:"text-sm text-slate-100"},lt={class:"text-sm text-slate-100"},ot={class:"text-sm text-slate-100"},at={class:"text-sm text-slate-100"},rt={class:"text-sm text-slate-100"},nt={class:"text-sm text-slate-100"},it={class:"text-sm text-slate-100"},dt={class:"text-sm text-slate-100"},ut={class:"text-sm text-slate-100"},xt={class:"text-sm text-slate-100"},pt={class:"text-sm text-slate-100"},ct={key:0,class:"col-span-2"},bt={class:"text-sm text-slate-100"},mt={__name:"StaffList",setup(vt){const u=d([]),w=d(!1),b=d(""),m=d(""),y=d(""),C=d(""),x=d(""),i=d(1),v=d(5),a=d(null),V=["P-1","P","A1-1","A1-2","A1-3","A2","B1","B2","M2"],S=async()=>{w.value=!0,b.value="";try{const t=await(await fetch(`${R}/api/staff`,{method:"GET",headers:{Accept:"application/json"}})).json();t.success?u.value=t.data:b.value="Failed to load staff data"}catch(o){b.value="Connection error. Please make sure the server is running.",console.error("Load error:",o)}finally{w.value=!1}},f=c(()=>{let o=u.value;if(x.value&&(o=o.filter(t=>t.group===x.value)),m.value){const t=m.value.toLowerCase();o=o.filter(s=>s.name.toLowerCase().includes(t)||s.staff_id.toLowerCase().includes(t)||s.phone_number.includes(t))}return y.value&&(o=o.filter(t=>t.department===y.value)),C.value&&(o=o.filter(t=>t.position===C.value)),o});c(()=>[...new Set(u.value.map(o=>o.department))].filter(Boolean)),c(()=>[...new Set(u.value.map(o=>o.position))].filter(Boolean)),c(()=>u.value.reduce((o,t)=>o+(t.ojk_case||0),0));const j=c(()=>Math.ceil(f.value.length/v.value)),A=c(()=>{const o=(i.value-1)*v.value,t=o+v.value;return f.value.slice(o,t)}),$=c(()=>{const o=[];let s=Math.max(1,i.value-Math.floor(2.5)),p=Math.min(j.value,s+5-1);p-s<4&&(s=Math.max(1,p-5+1));for(let B=s;B<=p;B++)o.push(B);return o}),M=o=>o.split(" ").map(t=>t[0]).join("").toUpperCase().substring(0,2),I=o=>u.value.filter(t=>t.group===o).length,P=o=>{a.value=o},N=()=>{window.location.href="/admin/dashboard"},D=()=>{window.location.href="/admin/import-staff"},z=()=>{m.value="",y.value="",C.value="",x.value="",i.value=1};return G(()=>{S()}),(o,t)=>(n(),r("div",J,[e("div",K,[e("div",{class:"mb-8"},[e("button",{onClick:N,class:"mb-4 text-slate-400 hover:text-slate-200 flex items-center gap-2 transition"},[...t[7]||(t[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),g(" Back to Dashboard ",-1)])]),e("div",{class:"flex items-center justify-between"},[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-3xl font-black bg-clip-text text-transparent bg-gradient-to-r from-white via-slate-100 to-slate-300"}," Staff List "),e("p",{class:"text-slate-400 mt-2"}," View and manage all staff members ")],-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:D,class:"px-4 py-2 bg-blue-600/20 text-blue-400 border border-blue-600/30 rounded-lg hover:bg-blue-600/30 transition flex items-center gap-2"},[...t[8]||(t[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),g(" Import ",-1)])])])])]),e("div",O,[t[11]||(t[11]=e("div",{class:"flex items-center gap-2 mb-3"},[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),e("span",{class:"text-sm font-medium text-slate-300"},"Filter by Group:")],-1)),e("div",U,[e("button",{onClick:t[0]||(t[0]=s=>x.value=""),class:h(["px-4 py-2 text-sm font-medium rounded-lg transition",x.value===""?"bg-blue-600/30 text-blue-300 border border-blue-500/50":"bg-slate-800/50 text-slate-400 border border-slate-700 hover:bg-slate-700/50 hover:text-slate-200"])},[t[10]||(t[10]=g(" All ",-1)),e("span",H,"("+l(u.value.length)+")",1)],2),(n(),r(_,null,k(V,s=>e("button",{key:s,onClick:p=>x.value=s,class:h(["px-4 py-2 text-sm font-medium rounded-lg transition",x.value===s?"bg-emerald-600/30 text-emerald-300 border border-emerald-500/50":"bg-slate-800/50 text-slate-400 border border-slate-700 hover:bg-slate-700/50 hover:text-slate-200"])},[g(l(s)+" ",1),e("span",Q,"("+l(I(s))+")",1)],10,q)),64))])]),e("div",X,[e("div",Y,[F(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),type:"text",placeholder:"Search by name, staff ID, or phone...",class:"flex-1 px-3 py-2 text-sm bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition"},null,512),[[T,m.value]]),e("button",{onClick:z,class:"px-3 py-2 text-sm bg-slate-800/50 border border-slate-700 rounded-lg text-slate-400 hover:text-slate-200 hover:border-slate-600 transition flex items-center justify-center",title:"Reset search"},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),w.value?(n(),r("div",Z,[...t[13]||(t[13]=[e("div",{class:"inline-block w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"},null,-1),e("p",{class:"text-slate-400 mt-4"},"Loading staff data...",-1)])])):b.value?(n(),r("div",ee,[t[14]||(t[14]=e("svg",{class:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",te,l(b.value),1),e("button",{onClick:S,class:"mt-4 px-4 py-2 bg-red-600/20 text-red-400 border border-red-600/30 rounded-lg hover:bg-red-600/30 transition"}," Retry ")])):f.value.length>0?(n(),r("div",se,[e("div",le,[e("table",oe,[t[16]||(t[16]=e("thead",{class:"bg-slate-800/50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Staff ID "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Name "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Position "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Department "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Phone "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Work Location "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ae,[(n(!0),r(_,null,k(A.value,s=>(n(),r("tr",{key:s.id,class:"hover:bg-slate-800/30 transition"},[e("td",re,[e("span",ne,l(s.staff_id),1)]),e("td",ie,[e("div",de,[e("div",ue,l(M(s.name)),1),e("div",null,[e("p",xe,l(s.name),1),e("p",pe,l(s.email||"No email"),1)])])]),e("td",ce,[e("span",be,l(s.position),1)]),e("td",me,[e("span",ve,l(s.department),1)]),e("td",fe,[e("span",ge,l(s.phone_number),1)]),e("td",he,[e("span",_e,l(s.work_location||"-"),1)]),e("td",ke,[s.ojk_case>0?(n(),r("span",we," OJK Case ")):s.warning_letter?(n(),r("span",ye," Warning ")):(n(),r("span",Ce," Active "))]),e("td",je,[e("button",{onClick:p=>P(s),class:"text-blue-400 hover:text-blue-300 transition"},[...t[15]||(t[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Me)])]))),128))])])]),e("div",Be,[(n(!0),r(_,null,k(A.value,s=>(n(),r("div",{key:s.id,onClick:p=>P(s),class:"p-4 hover:bg-slate-800/30 transition cursor-pointer"},[e("div",Se,[e("div",Ae,l(M(s.name)),1),e("div",Pe,[e("h3",De,l(s.name),1),e("p",Ve,l(s.position),1),e("p",$e,l(s.staff_id),1)]),e("div",null,[s.ojk_case>0?(n(),r("span",Ie," OJK ")):s.warning_letter?(n(),r("span",Ne," Warning ")):(n(),r("span",ze," Active "))])]),e("div",Ge,[e("div",null,[t[17]||(t[17]=e("p",{class:"text-slate-500"},"Department",-1)),e("p",Fe,l(s.department),1)]),e("div",null,[t[18]||(t[18]=e("p",{class:"text-slate-500"},"Phone",-1)),e("p",Te,l(s.phone_number),1)])])],8,Le))),128))]),j.value>1?(n(),r("div",We,[e("p",Ee," Showing "+l((i.value-1)*v.value+1)+" to "+l(Math.min(i.value*v.value,f.value.length))+" of "+l(f.value.length)+" staff ",1),e("div",Re,[e("button",{onClick:t[2]||(t[2]=s=>i.value--),disabled:i.value===1,class:"px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-300 hover:bg-slate-700/50 transition disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Je),(n(!0),r(_,null,k($.value,s=>(n(),r("button",{key:s,onClick:p=>i.value=s,class:h(["px-4 py-2 border rounded-lg transition",i.value===s?"bg-blue-600/30 border-blue-500 text-blue-300":"bg-slate-800/50 border-slate-700 text-slate-300 hover:bg-slate-700/50"])},l(s),11,Ke))),128)),e("button",{onClick:t[3]||(t[3]=s=>i.value++),disabled:i.value===j.value,class:"px-4 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-slate-300 hover:bg-slate-700/50 transition disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Oe)])])):L("",!0)])):(n(),r("div",Ue,[t[19]||(t[19]=e("svg",{class:"w-16 h-16 text-slate-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),t[20]||(t[20]=e("p",{class:"text-slate-400 text-lg"},"No staff found",-1)),e("button",{onClick:D,class:"mt-4 px-6 py-3 bg-blue-600/20 text-blue-400 border border-blue-600/30 rounded-lg hover:bg-blue-600/30 transition"}," Import Staff Data ")])),a.value?(n(),r("div",{key:4,onClick:t[6]||(t[6]=s=>a.value=null),class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50"},[e("div",{onClick:t[5]||(t[5]=W(()=>{},["stop"])),class:"bg-slate-900 border border-slate-800 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"},[e("div",He,[e("div",qe,[e("div",Qe,l(M(a.value.name)),1),e("div",null,[e("h2",Xe,l(a.value.name),1),e("p",Ye,l(a.value.position),1)])]),e("button",{onClick:t[4]||(t[4]=s=>a.value=null),class:"text-slate-400 hover:text-slate-200 transition"},[...t[21]||(t[21]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ze,[e("div",null,[t[22]||(t[22]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Staff ID ",-1)),e("p",et,l(a.value.staff_id),1)]),e("div",null,[t[23]||(t[23]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Department ",-1)),e("p",tt,l(a.value.department),1)]),e("div",null,[t[24]||(t[24]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Phone Number ",-1)),e("p",st,l(a.value.phone_number),1)]),e("div",null,[t[25]||(t[25]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Email ",-1)),e("p",lt,l(a.value.email||"-"),1)]),e("div",null,[t[26]||(t[26]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Superior ",-1)),e("p",ot,l(a.value.superior||"-"),1)]),e("div",null,[t[27]||(t[27]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Group ",-1)),e("p",at,l(a.value.group||"-"),1)]),e("div",null,[t[28]||(t[28]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Area ",-1)),e("p",rt,l(a.value.area||"-"),1)]),e("div",null,[t[29]||(t[29]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Work Location ",-1)),e("p",nt,l(a.value.work_location||"-"),1)]),e("div",null,[t[30]||(t[30]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Hire Date ",-1)),e("p",it,l(a.value.hire_date),1)]),e("div",null,[t[31]||(t[31]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Rank ",-1)),e("p",dt,l(a.value.rank||"-"),1)]),e("div",null,[t[32]||(t[32]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Device ",-1)),e("p",ut,l(a.value.device||"-"),1)]),e("div",null,[t[33]||(t[33]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Team Leader ID ",-1)),e("p",xt,l(a.value.team_leader_id||"-"),1)]),e("div",null,[t[34]||(t[34]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Warning Letter ",-1)),e("p",pt,l(a.value.warning_letter||"-"),1)]),e("div",null,[t[35]||(t[35]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," OJK Case ",-1)),e("p",{class:h(["text-sm font-semibold",a.value.ojk_case>0?"text-red-400":"text-emerald-400"])},l(a.value.ojk_case),3)]),a.value.notes?(n(),r("div",ct,[t[36]||(t[36]=e("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Notes ",-1)),e("p",bt,l(a.value.notes),1)])):L("",!0)])])])):L("",!0)])]))}};E(mt).mount("#app");
