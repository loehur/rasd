import{r as i,i as u,j as z,c as r,o as n,a as t,d as S,g as v,n as y,t as l,F as C,k as M,e as F,v as G,w as W,h as $}from"./tailwind-BChqtM0q.js";import{A as R}from"./api-n_PshMHp.js";const T={class:"min-h-screen bg-slate-950 text-slate-100 p-6"},E={class:"max-w-7xl mx-auto"},H={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-xl p-4 mb-4"},O={class:"flex flex-wrap gap-2"},U={class:"ml-1 text-xs opacity-70"},J=["onClick"],K={class:"ml-1 text-xs opacity-70"},q={class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-xl p-4 mb-4"},Q={class:"flex gap-2"},X={key:0,class:"text-center py-12 bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl"},Y={key:1,class:"bg-red-500/10 border border-red-500/30 rounded-2xl p-6 text-center"},Z={class:"text-red-300 font-semibold"},tt={key:2,class:"bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl overflow-hidden"},et={class:"hidden md:block overflow-x-auto"},st={class:"w-full text-xs"},lt={class:"divide-y divide-slate-800/50"},ot={class:"px-3 py-2"},at={class:"px-3 py-2"},rt={class:"px-3 py-2 text-blue-400 font-mono"},nt={class:"px-3 py-2"},it={class:"px-3 py-2"},dt={class:"px-3 py-2"},pt={class:"px-3 py-2"},ut={class:"px-3 py-2"},xt={class:"px-3 py-2"},ct={class:"px-3 py-2"},mt={class:"px-3 py-2"},bt={class:"md:hidden divide-y divide-slate-800/50"},vt=["onClick"],ft={class:"flex items-start gap-3 mb-3"},gt={class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0"},ht={class:"flex-1 min-w-0"},kt={class:"text-sm font-semibold text-slate-100 truncate"},_t={class:"text-xs text-slate-400 truncate"},wt={class:"text-xs font-mono text-blue-400 mt-1"},yt={key:0,class:"px-2 py-1 text-xs font-medium rounded-full bg-red-500/20 text-red-300 border border-red-500/30"},Ct={key:1,class:"px-2 py-1 text-xs font-medium rounded-full bg-orange-500/20 text-orange-300 border border-orange-500/30"},Mt={key:2,class:"px-2 py-1 text-xs font-medium rounded-full bg-emerald-500/20 text-emerald-300 border border-emerald-500/30"},jt={class:"grid grid-cols-2 gap-2 text-xs"},Lt={class:"text-slate-300 font-medium truncate"},Bt={class:"text-slate-300 font-medium truncate"},St={key:3,class:"text-center py-12 bg-slate-900/70 backdrop-blur border border-slate-800/80 rounded-2xl"},At={class:"flex items-start justify-between mb-6"},Dt={class:"flex items-center gap-4"},Pt={class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-white text-2xl font-bold"},Vt={class:"text-2xl font-bold text-slate-100"},It={class:"text-slate-400"},Nt={class:"grid grid-cols-2 gap-4"},zt={class:"text-sm text-slate-100 font-mono"},Ft={class:"text-sm text-slate-100"},Gt={class:"text-sm text-slate-100"},Wt={class:"text-sm text-slate-100"},$t={class:"text-sm text-slate-100"},Rt={class:"text-sm text-slate-100"},Tt={class:"text-sm text-slate-100"},Et={class:"text-sm text-slate-100"},Ht={class:"text-sm text-slate-100"},Ot={class:"text-sm text-slate-100"},Ut={class:"text-sm text-slate-100"},Jt={class:"text-sm text-slate-100"},Kt={class:"text-sm text-slate-100"},qt={key:0,class:"col-span-2"},Qt={class:"text-sm text-slate-100"},Xt={__name:"StaffList",setup(Yt){const d=i([]),f=i(!1),x=i(""),c=i(""),g=i(""),h=i(""),p=i(""),k=i(1),_=i(5),a=i(null),A=["P-1","P","A1-1","A1-2","A1-3","A2","B1","B2","M2"],j=async()=>{f.value=!0,x.value="";try{const e=await(await fetch(`${R}/api/staff`,{method:"GET",headers:{Accept:"application/json"}})).json();e.success?d.value=e.data:x.value="Failed to load staff data"}catch(o){x.value="Connection error. Please make sure the server is running.",console.error("Load error:",o)}finally{f.value=!1}},m=u(()=>{let o=d.value;if(p.value&&(o=o.filter(e=>e.group===p.value)),c.value){const e=c.value.toLowerCase();o=o.filter(s=>s.name.toLowerCase().includes(e)||s.staff_id.toLowerCase().includes(e)||s.phone_number.includes(e))}return g.value&&(o=o.filter(e=>e.department===g.value)),h.value&&(o=o.filter(e=>e.position===h.value)),o});u(()=>[...new Set(d.value.map(o=>o.department))].filter(Boolean)),u(()=>[...new Set(d.value.map(o=>o.position))].filter(Boolean)),u(()=>d.value.reduce((o,e)=>o+(e.ojk_case||0),0));const D=u(()=>Math.ceil(m.value.length/_.value));u(()=>{const o=(k.value-1)*_.value,e=o+_.value;return m.value.slice(o,e)}),u(()=>{const o=[];let s=Math.max(1,k.value-Math.floor(2.5)),b=Math.min(D.value,s+5-1);b-s<4&&(s=Math.max(1,b-5+1));for(let w=s;w<=b;w++)o.push(w);return o});const L=o=>o.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2),P=o=>d.value.filter(e=>e.group===o).length,V=o=>{a.value=o},I=()=>{window.location.href="/admin/dashboard"},B=()=>{window.location.href="/admin/import-staff"},N=()=>{c.value="",g.value="",h.value="",p.value="",k.value=1};return z(()=>{j()}),(o,e)=>(n(),r("div",T,[t("div",E,[t("div",{class:"mb-8"},[t("button",{onClick:I,class:"mb-4 text-slate-400 hover:text-slate-200 flex items-center gap-2 transition"},[...e[5]||(e[5]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),v(" Back to Dashboard ",-1)])]),t("div",{class:"flex items-center justify-between"},[e[7]||(e[7]=t("div",null,[t("h1",{class:"text-3xl font-black bg-clip-text text-transparent bg-gradient-to-r from-white via-slate-100 to-slate-300"}," Staff List "),t("p",{class:"text-slate-400 mt-2"}," View and manage all staff members ")],-1)),t("div",{class:"flex gap-3"},[t("button",{onClick:B,class:"px-4 py-2 bg-blue-600/20 text-blue-400 border border-blue-600/30 rounded-lg hover:bg-blue-600/30 transition flex items-center gap-2"},[...e[6]||(e[6]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),v(" Import ",-1)])])])])]),t("div",H,[e[9]||(e[9]=t("div",{class:"flex items-center gap-2 mb-3"},[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),t("span",{class:"text-sm font-medium text-slate-300"},"Filter by Group:")],-1)),t("div",O,[t("button",{onClick:e[0]||(e[0]=s=>p.value=""),class:y(["px-4 py-2 text-sm font-medium rounded-lg transition",p.value===""?"bg-blue-600/30 text-blue-300 border border-blue-500/50":"bg-slate-800/50 text-slate-400 border border-slate-700 hover:bg-slate-700/50 hover:text-slate-200"])},[e[8]||(e[8]=v(" All ",-1)),t("span",U,"("+l(d.value.length)+")",1)],2),(n(),r(C,null,M(A,s=>t("button",{key:s,onClick:b=>p.value=s,class:y(["px-4 py-2 text-sm font-medium rounded-lg transition",p.value===s?"bg-emerald-600/30 text-emerald-300 border border-emerald-500/50":"bg-slate-800/50 text-slate-400 border border-slate-700 hover:bg-slate-700/50 hover:text-slate-200"])},[v(l(s)+" ",1),t("span",K,"("+l(P(s))+")",1)],10,J)),64))])]),t("div",q,[t("div",Q,[F(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),type:"text",placeholder:"Search by name, staff ID, or phone...",class:"flex-1 px-3 py-2 text-sm bg-slate-800/50 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition"},null,512),[[G,c.value]]),t("button",{onClick:N,class:"px-3 py-2 text-sm bg-slate-800/50 border border-slate-700 rounded-lg text-slate-400 hover:text-slate-200 hover:border-slate-600 transition flex items-center justify-center",title:"Reset search"},[...e[10]||(e[10]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),f.value?(n(),r("div",X,[...e[11]||(e[11]=[t("div",{class:"inline-block w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"},null,-1),t("p",{class:"text-slate-400 mt-4"},"Loading staff data...",-1)])])):x.value?(n(),r("div",Y,[e[12]||(e[12]=t("svg",{class:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",Z,l(x.value),1),t("button",{onClick:j,class:"mt-4 px-4 py-2 bg-red-600/20 text-red-400 border border-red-600/30 rounded-lg hover:bg-red-600/30 transition"}," Retry ")])):m.value.length>0?(n(),r("div",tt,[t("div",et,[t("table",st,[e[13]||(e[13]=t("thead",{class:"bg-slate-800/50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"Area"),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"WFH/Onsite"),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"ID Staff"),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"Name Staff"),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"Position"),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"Superior"),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"Department"),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"Hiredate"),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"Rank"),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"Device"),t("th",{class:"px-3 py-2 text-left text-[11px] font-semibold text-slate-300 uppercase tracking-wider"},"WL")])],-1)),t("tbody",lt,[(n(!0),r(C,null,M(m.value,s=>(n(),r("tr",{key:s.id,class:"hover:bg-slate-800/30 transition"},[t("td",ot,l(s.area||"-"),1),t("td",at,l(s.work_location||"-"),1),t("td",rt,l(s.staff_id),1),t("td",nt,l(s.name),1),t("td",it,l(s.position||"-"),1),t("td",dt,l(s.superior||"-"),1),t("td",pt,l(s.department||"-"),1),t("td",ut,l(s.hire_date),1),t("td",xt,l(s.rank||"-"),1),t("td",ct,l(s.device||"-"),1),t("td",mt,l(s.warning_letter?"WL":"-"),1)]))),128))])])]),t("div",bt,[(n(!0),r(C,null,M(m.value,s=>(n(),r("div",{key:s.id,onClick:b=>V(s),class:"p-4 hover:bg-slate-800/30 transition cursor-pointer"},[t("div",ft,[t("div",gt,l(L(s.name)),1),t("div",ht,[t("h3",kt,l(s.name),1),t("p",_t,l(s.position),1),t("p",wt,l(s.staff_id),1)]),t("div",null,[s.ojk_case>0?(n(),r("span",yt," OJK ")):s.warning_letter?(n(),r("span",Ct," Warning ")):(n(),r("span",Mt," Active "))])]),t("div",jt,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-slate-500"},"Department",-1)),t("p",Lt,l(s.department),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-slate-500"},"Phone",-1)),t("p",Bt,l(s.phone_number),1)])])],8,vt))),128))])])):(n(),r("div",St,[e[16]||(e[16]=t("svg",{class:"w-16 h-16 text-slate-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),e[17]||(e[17]=t("p",{class:"text-slate-400 text-lg"},"No staff found",-1)),t("button",{onClick:B,class:"mt-4 px-6 py-3 bg-blue-600/20 text-blue-400 border border-blue-600/30 rounded-lg hover:bg-blue-600/30 transition"}," Import Staff Data ")])),a.value?(n(),r("div",{key:4,onClick:e[4]||(e[4]=s=>a.value=null),class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50"},[t("div",{onClick:e[3]||(e[3]=W(()=>{},["stop"])),class:"bg-slate-900 border border-slate-800 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"},[t("div",At,[t("div",Dt,[t("div",Pt,l(L(a.value.name)),1),t("div",null,[t("h2",Vt,l(a.value.name),1),t("p",It,l(a.value.position),1)])]),t("button",{onClick:e[2]||(e[2]=s=>a.value=null),class:"text-slate-400 hover:text-slate-200 transition"},[...e[18]||(e[18]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Nt,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Staff ID ",-1)),t("p",zt,l(a.value.staff_id),1)]),t("div",null,[e[20]||(e[20]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Department ",-1)),t("p",Ft,l(a.value.department),1)]),t("div",null,[e[21]||(e[21]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Phone Number ",-1)),t("p",Gt,l(a.value.phone_number),1)]),t("div",null,[e[22]||(e[22]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Email ",-1)),t("p",Wt,l(a.value.email||"-"),1)]),t("div",null,[e[23]||(e[23]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Superior ",-1)),t("p",$t,l(a.value.superior||"-"),1)]),t("div",null,[e[24]||(e[24]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Group ",-1)),t("p",Rt,l(a.value.group||"-"),1)]),t("div",null,[e[25]||(e[25]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Area ",-1)),t("p",Tt,l(a.value.area||"-"),1)]),t("div",null,[e[26]||(e[26]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Work Location ",-1)),t("p",Et,l(a.value.work_location||"-"),1)]),t("div",null,[e[27]||(e[27]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Hire Date ",-1)),t("p",Ht,l(a.value.hire_date),1)]),t("div",null,[e[28]||(e[28]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Rank ",-1)),t("p",Ot,l(a.value.rank||"-"),1)]),t("div",null,[e[29]||(e[29]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Device ",-1)),t("p",Ut,l(a.value.device||"-"),1)]),t("div",null,[e[30]||(e[30]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Team Leader ID ",-1)),t("p",Jt,l(a.value.team_leader_id||"-"),1)]),t("div",null,[e[31]||(e[31]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Warning Letter ",-1)),t("p",Kt,l(a.value.warning_letter||"-"),1)]),t("div",null,[e[32]||(e[32]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," OJK Case ",-1)),t("p",{class:y(["text-sm font-semibold",a.value.ojk_case>0?"text-red-400":"text-emerald-400"])},l(a.value.ojk_case),3)]),a.value.notes?(n(),r("div",qt,[e[33]||(e[33]=t("p",{class:"text-xs text-slate-500 uppercase mb-1"}," Notes ",-1)),t("p",Qt,l(a.value.notes),1)])):S("",!0)])])])):S("",!0)])]))}};$(Xt).mount("#app");
