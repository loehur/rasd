import{A as s}from"./api-n_PshMHp.js";async function p(){const e=localStorage.getItem("tl_auth_token");return await(await fetch(`${s}/api/team-leader/staff`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json()}async function l(e=1,t=null,n=15){const o=localStorage.getItem("tl_auth_token"),a=new URLSearchParams;return a.set("page",String(e)),t&&a.set("report_day",t),n&&a.set("per_page",String(n)),await(await fetch(`${s}/api/attendances?${a.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})).json()}async function h(){const e=localStorage.getItem("tl_auth_token");return await(await fetch(`${s}/api/attendances/staff/team-leader`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json()}async function u(e){const t=localStorage.getItem("tl_auth_token");return await(await fetch(`${s}/api/attendances/staff/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).json()}async function f(e,t){const n=localStorage.getItem("tl_auth_token"),o=new FormData;Object.keys(e).forEach(c=>{e[c]!==null&&e[c]!==void 0&&o.append(c,e[c])}),t&&o.append("proof",t);const r=await(await fetch(`${s}/api/attendances`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:o})).text();try{return JSON.parse(r)}catch{return console.error("Attendance create response (non-JSON):",r),{success:!1,message:"Server error: unexpected response (not JSON)."}}}async function d(e){const t=localStorage.getItem("auth_token"),n=JSON.parse(localStorage.getItem("user")||"{}").role;return await(await fetch(`${s}/api/attendances/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json","X-Role":n}})).json()}async function g(e){const t=localStorage.getItem("auth_token"),n=JSON.parse(localStorage.getItem("user")||"{}").role;return await(await fetch(`${s}/api/users/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"X-Role":n}})).json()}async function m(e,t=1,n=15){const o=localStorage.getItem("tl_auth_token"),a=new URLSearchParams;return a.set("page",String(t)),n&&a.set("per_page",String(n)),e&&a.set("month",e),await(await fetch(`${s}/api/attendances?${a.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})).json()}async function S(e,t=1e3){const n=localStorage.getItem("auth_token"),o=JSON.parse(localStorage.getItem("user")||"{}").role,a=new URLSearchParams;return t&&a.set("per_page",String(t)),e&&a.set("month",e),await(await fetch(`${s}/api/attendances?${a.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json","X-Role":o}})).json()}export{d as adminDeleteAttendance,S as adminGetAttendancesByMonth,f as createAttendance,g as deleteUser,l as getAttendances,m as getAttendancesByMonth,h as getStaffByTeamLeader,u as getStaffDetail,p as getTeamLeaderStaff};
